<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—è¯¦è§£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #c2185b;
            margin-bottom: 15px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #c2185b;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #f48fb1;
        }
        
        .content-text {
            color: #555;
            font-size: 1.05em;
            line-height: 1.8;
            margin-bottom: 20px;
        }
        
        .highlight {
            color: #c2185b;
            font-weight: bold;
            background: #fce4ec;
            padding: 2px 6px;
            border-radius: 3px;
        }
        
        /* çŸ©é˜µä¹˜æ³•å¯è§†åŒ– */
        .matrix-multiplication {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #fce4ec, #f8bbd0);
            border-radius: 15px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .matrix-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .matrix-label {
            color: #c2185b;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .matrix-grid {
            display: grid;
            gap: 5px;
        }
        
        .matrix-grid.q {
            grid-template-columns: repeat(3, 45px);
        }
        
        .matrix-grid.k {
            grid-template-columns: repeat(3, 45px);
        }
        
        .matrix-grid.score {
            grid-template-columns: repeat(3, 50px);
        }
        
        .matrix-cell {
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .matrix-cell.q {
            background: linear-gradient(135deg, #42a5f5, #1e88e5);
            color: white;
        }
        
        .matrix-cell.k {
            background: linear-gradient(135deg, #66bb6a, #43a047);
            color: white;
        }
        
        .matrix-cell.score {
            background: linear-gradient(135deg, #ec407a, #c2185b);
            color: white;
            animation: scoreAppear 0.8s ease-out;
        }
        
        @keyframes scoreAppear {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .operator {
            font-size: 2.5em;
            color: #c2185b;
            font-weight: bold;
        }
        
        /* æ³¨æ„åŠ›çƒ­åŠ›å›¾ */
        .attention-heatmap {
            margin: 30px 0;
            padding: 25px;
            background: #f5f5f5;
            border-radius: 10px;
        }
        
        .heatmap-title {
            color: #c2185b;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: auto repeat(4, 1fr);
            gap: 5px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .heatmap-cell {
            padding: 15px;
            text-align: center;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .heatmap-cell.header {
            background: linear-gradient(135deg, #ec407a, #c2185b);
            color: white;
        }
        
        .heatmap-cell.high {
            background: #ffcdd2;
            color: #c2185b;
        }
        
        .heatmap-cell.medium {
            background: #f8bbd0;
            color: #880e4f;
        }
        
        .heatmap-cell.low {
            background: #fce4ec;
            color: #ad1457;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(194, 24, 91, 0.3);
        }
        
        /* å…¬å¼æ¡† */
        .formula-box {
            background: linear-gradient(135deg, #fce4ec, #f8bbd0);
            border-left: 5px solid #c2185b;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .formula {
            font-size: 1.4em;
            color: #c2185b;
            text-align: center;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            font-weight: bold;
        }
        
        /* è®¡ç®—æ­¥éª¤ */
        .calculation-steps {
            background: #fff3e0;
            border: 3px solid #ffb74d;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .calc-title {
            color: #f57c00;
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .calc-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #ffb74d;
        }
        
        .step-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: #ff9800;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .step-content {
            display: inline-block;
            vertical-align: top;
            width: calc(100% - 50px);
        }
        
        /* ç¼©æ”¾å› å­è¯´æ˜ */
        .scaling-demo {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            padding: 25px;
            background: #e8f5e9;
            border-radius: 12px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .scaling-box {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .scaling-label {
            color: #2e7d32;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .scaling-value {
            font-size: 2em;
            color: #43a047;
            font-weight: bold;
            margin: 15px 0;
        }
        
        /* å¯¹æ¯”è¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            margin: 30px 0;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, #ec407a, #c2185b);
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: left;
        }
        
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            color: #555;
        }
        
        .comparison-table tr:hover {
            background: #fce4ec;
        }
        
        /* æç¤ºæ¡† */
        .tip-box {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .tip-title {
            color: #1565c0;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .tip-content {
            color: #555;
            line-height: 1.8;
        }
        
        /* ä»£ç å— */
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 25px 0;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .matrix-multiplication {
                flex-direction: column;
            }
            
            .heatmap-grid {
                grid-template-columns: auto repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—è¯¦è§£</h1>
        <p class="subtitle">Attention Score = Q Ã— K^T / âˆšd_k</p>
        
        <!-- 1. åŸºæœ¬æ¦‚å¿µ -->
        <div class="section">
            <h2 class="section-title">ä¸€ã€ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›åˆ†æ•°</h2>
            <p class="content-text">
                æ³¨æ„åŠ›åˆ†æ•°ï¼ˆAttention Scoreï¼‰è¡¡é‡<span class="highlight">æ¯ä¸ªè¯å¯¹å…¶ä»–è¯çš„å…³æ³¨ç¨‹åº¦</span>ã€‚
                é€šè¿‡è®¡ç®—Queryå’ŒKeyçš„ç›¸ä¼¼åº¦ï¼Œç¡®å®šå“ªäº›è¯ä¹‹é—´è”ç³»æ›´ç´§å¯†ã€‚
            </p>
            
            <div class="tip-box">
                <div class="tip-title">ğŸ’¡ ç›´è§‚ç†è§£</div>
                <div class="tip-content">
                    åœ¨å¥å­"æˆ‘çˆ±å­¦ä¹ AI"ä¸­ï¼š<br>
                    â€¢ "çˆ±"è¿™ä¸ªè¯åº”è¯¥æ›´å…³æ³¨"æˆ‘"ï¼ˆä¸»è¯­ï¼‰å’Œ"å­¦ä¹ "ï¼ˆå®¾è¯­ï¼‰<br>
                    â€¢ "AI"åº”è¯¥æ›´å…³æ³¨"å­¦ä¹ "ï¼ˆå› ä¸ºå­¦ä¹ çš„å¯¹è±¡æ˜¯AIï¼‰<br>
                    <br>
                    æ³¨æ„åŠ›åˆ†æ•°å°±æ˜¯ç”¨<strong>æ•°å€¼</strong>æ¥è¡¨ç¤ºè¿™ç§å…³è”å¼ºåº¦
                </div>
            </div>
        </div>
        
        <!-- 2. è®¡ç®—å…¬å¼ -->
        <div class="section">
            <h2 class="section-title">äºŒã€æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—å…¬å¼</h2>
            
            <div class="formula-box">
                <div class="formula">Score = Q Ã— K^T / âˆšd_k</div>
                <p style="color: #666; text-align: center; margin-top: 20px;">
                    â€¢ Q: QueryçŸ©é˜µ (seq_len, d_k)<br>
                    â€¢ K^T: KeyçŸ©é˜µçš„è½¬ç½® (d_k, seq_len)<br>
                    â€¢ d_k: Keyå‘é‡çš„ç»´åº¦ï¼ˆé€šå¸¸æ˜¯64ï¼‰<br>
                    â€¢ âˆšd_k: ç¼©æ”¾å› å­ï¼Œé˜²æ­¢æ•°å€¼è¿‡å¤§
                </p>
            </div>
            
            <p class="content-text">
                <strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong>é€šè¿‡<span class="highlight">çŸ©é˜µä¹˜æ³•</span>è®¡ç®—Queryå’ŒKeyçš„ç‚¹ç§¯ï¼Œå¾—åˆ°ç›¸ä¼¼åº¦åˆ†æ•°
            </p>
        </div>
        
        <!-- 3. çŸ©é˜µä¹˜æ³•è¿‡ç¨‹ -->
        <div class="section">
            <h2 class="section-title">ä¸‰ã€çŸ©é˜µä¹˜æ³•å¯è§†åŒ–</h2>
            <p class="content-text">
                å‡è®¾æœ‰3ä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„Qå’ŒKå‘é‡ç»´åº¦ä¸º3ï¼ˆç®€åŒ–å±•ç¤ºï¼‰ï¼š
            </p>
            
            <div class="matrix-multiplication">
                <div class="matrix-box">
                    <div class="matrix-label">Query (Q)</div>
                    <div class="matrix-grid q">
                        <div class="matrix-cell q">0.5</div>
                        <div class="matrix-cell q">0.3</div>
                        <div class="matrix-cell q">0.8</div>
                        
                        <div class="matrix-cell q">0.2</div>
                        <div class="matrix-cell q">0.7</div>
                        <div class="matrix-cell q">0.4</div>
                        
                        <div class="matrix-cell q">0.6</div>
                        <div class="matrix-cell q">0.1</div>
                        <div class="matrix-cell q">0.9</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        (3è¯ Ã— 3ç»´)
                    </div>
                </div>
                
                <div class="operator">Ã—</div>
                
                <div class="matrix-box">
                    <div class="matrix-label">Key^T (K^T)</div>
                    <div class="matrix-grid k">
                        <div class="matrix-cell k">0.4</div>
                        <div class="matrix-cell k">0.6</div>
                        <div class="matrix-cell k">0.2</div>
                        
                        <div class="matrix-cell k">0.8</div>
                        <div class="matrix-cell k">0.3</div>
                        <div class="matrix-cell k">0.5</div>
                        
                        <div class="matrix-cell k">0.7</div>
                        <div class="matrix-cell k">0.9</div>
                        <div class="matrix-cell k">0.1</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        (3ç»´ Ã— 3è¯)
                    </div>
                </div>
                
                <div class="operator">=</div>
                
                <div class="matrix-box">
                    <div class="matrix-label">Attention Score</div>
                    <div class="matrix-grid score">
                        <div class="matrix-cell score">0.98</div>
                        <div class="matrix-cell score">0.82</div>
                        <div class="matrix-cell score">0.65</div>
                        
                        <div class="matrix-cell score">0.74</div>
                        <div class="matrix-cell score">1.15</div>
                        <div class="matrix-cell score">0.53</div>
                        
                        <div class="matrix-cell score">0.91</div>
                        <div class="matrix-cell score">1.05</div>
                        <div class="matrix-cell score">0.36</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        (3è¯ Ã— 3è¯)
                    </div>
                </div>
            </div>
            
            <p class="content-text" style="text-align: center; color: #c2185b; font-weight: bold;">
                ç»“æœçŸ©é˜µ[i][j]è¡¨ç¤ºï¼šç¬¬iä¸ªè¯å¯¹ç¬¬jä¸ªè¯çš„æ³¨æ„åŠ›åˆ†æ•°
            </p>
        </div>
        
        <!-- 4. è¯¦ç»†è®¡ç®—ç¤ºä¾‹ -->
        <div class="section">
            <h2 class="section-title">å››ã€å®Œæ•´è®¡ç®—ç¤ºä¾‹</h2>
            
            <div class="calculation-steps">
                <div class="calc-title">ğŸ§® è®¡ç®—"æˆ‘"å¯¹"çˆ±"çš„æ³¨æ„åŠ›åˆ†æ•°</div>
                
                <div class="calc-step">
                    <span class="step-number">1</span>
                    <div class="step-content">
                        <strong>å‡†å¤‡Queryå’ŒKeyå‘é‡</strong><br>
                        Q(æˆ‘) = [0.5, 0.3, 0.8]<br>
                        K(çˆ±) = [0.8, 0.3, 0.5]
                    </div>
                </div>
                
                <div class="calc-step">
                    <span class="step-number">2</span>
                    <div class="step-content">
                        <strong>è®¡ç®—ç‚¹ç§¯</strong><br>
                        ç‚¹ç§¯ = 0.5Ã—0.8 + 0.3Ã—0.3 + 0.8Ã—0.5<br>
                        = 0.4 + 0.09 + 0.4<br>
                        = <strong style="color: #f57c00;">0.89</strong>
                    </div>
                </div>
                
                <div class="calc-step">
                    <span class="step-number">3</span>
                    <div class="step-content">
                        <strong>é™¤ä»¥ç¼©æ”¾å› å­</strong><br>
                        d_k = 3ï¼ˆå‘é‡ç»´åº¦ï¼‰<br>
                        âˆšd_k = âˆš3 â‰ˆ 1.732<br>
                        ç¼©æ”¾ååˆ†æ•° = 0.89 / 1.732<br>
                        = <strong style="color: #f57c00;">0.514</strong>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 5. ç¼©æ”¾å› å­çš„ä½œç”¨ -->
        <div class="section">
            <h2 class="section-title">äº”ã€ä¸ºä»€ä¹ˆè¦é™¤ä»¥âˆšd_k</h2>
            <p class="content-text">
                ç¼©æ”¾å› å­<span class="highlight">âˆšd_k</span>çš„ä½œç”¨æ˜¯é˜²æ­¢ç‚¹ç§¯ç»“æœè¿‡å¤§ï¼Œå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±ã€‚
            </p>
            
            <div class="scaling-demo">
                <div class="scaling-box">
                    <div class="scaling-label">ä¸ä½¿ç”¨ç¼©æ”¾</div>
                    <div class="scaling-value">128.5</div>
                    <div style="color: #666; font-size: 0.9em;">
                        å½“d_k=512æ—¶<br>
                        ç‚¹ç§¯å¯èƒ½å¾ˆå¤§<br>
                        Softmaxæ¢¯åº¦è¶‹è¿‘0
                    </div>
                </div>
                
                <div class="scaling-box">
                    <div class="scaling-label">ä½¿ç”¨ç¼©æ”¾</div>
                    <div class="scaling-value">5.68</div>
                    <div style="color: #666; font-size: 0.9em;">
                        é™¤ä»¥âˆš512â‰ˆ22.6<br>
                        ç»“æœåœ¨åˆç†èŒƒå›´<br>
                        æ¢¯åº¦ç¨³å®š
                    </div>
                </div>
            </div>
            
            <div class="tip-box">
                <div class="tip-title">ğŸ“Œ æŠ€æœ¯ç»†èŠ‚</div>
                <div class="tip-content">
                    å½“d_kè¾ƒå¤§æ—¶ï¼ˆå¦‚512ï¼‰ï¼Œä¸¤ä¸ªéšæœºå‘é‡çš„ç‚¹ç§¯çš„æ–¹å·®çº¦ä¸ºd_kã€‚<br>
                    é™¤ä»¥âˆšd_kåï¼Œæ–¹å·®å˜ä¸º1ï¼Œä½¿æ•°å€¼ä¿æŒåœ¨åˆç†èŒƒå›´ï¼Œ<br>
                    é¿å…Softmaxå‡½æ•°è¾“å‡ºè¿‡äºæç«¯ï¼ˆæ¥è¿‘0æˆ–1ï¼‰ï¼Œä¿è¯æ¢¯åº¦æœ‰æ•ˆä¼ æ’­ã€‚
                </div>
            </div>
        </div>
        
        <!-- 6. æ³¨æ„åŠ›çŸ©é˜µè§£è¯» -->
        <div class="section">
            <h2 class="section-title">å…­ã€æ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µè§£è¯»</h2>
            <p class="content-text">
                å¯¹äºå¥å­"æˆ‘ çˆ± å­¦ä¹  AI"ï¼Œæ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µå¦‚ä¸‹ï¼š
            </p>
            
            <div class="attention-heatmap">
                <div class="heatmap-title">æ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µï¼ˆç¼©æ”¾å‰ï¼‰</div>
                <div class="heatmap-grid">
                    <div class="heatmap-cell"></div>
                    <div class="heatmap-cell header">æˆ‘</div>
                    <div class="heatmap-cell header">çˆ±</div>
                    <div class="heatmap-cell header">å­¦ä¹ </div>
                    <div class="heatmap-cell header">AI</div>
                    
                    <div class="heatmap-cell header">æˆ‘</div>
                    <div class="heatmap-cell high">8.5</div>
                    <div class="heatmap-cell medium">3.2</div>
                    <div class="heatmap-cell low">1.8</div>
                    <div class="heatmap-cell low">2.1</div>
                    
                    <div class="heatmap-cell header">çˆ±</div>
                    <div class="heatmap-cell medium">4.1</div>
                    <div class="heatmap-cell high">7.8</div>
                    <div class="heatmap-cell high">6.5</div>
                    <div class="heatmap-cell medium">3.7</div>
                    
                    <div class="heatmap-cell header">å­¦ä¹ </div>
                    <div class="heatmap-cell low">2.3</div>
                    <div class="heatmap-cell high">5.9</div>
                    <div class="heatmap-cell high">9.2</div>
                    <div class="heatmap-cell high">7.4</div>
                    
                    <div class="heatmap-cell header">AI</div>
                    <div class="heatmap-cell low">1.9</div>
                    <div class="heatmap-cell medium">3.8</div>
                    <div class="heatmap-cell high">6.8</div>
                    <div class="heatmap-cell high">8.6</div>
                </div>
                <p style="color: #666; text-align: center; margin-top: 15px;">
                    é¢œè‰²è¶Šæ·±è¡¨ç¤ºæ³¨æ„åŠ›è¶Šå¼º
                </p>
            </div>
            
            <p class="content-text">
                <strong>è§£è¯»ï¼š</strong><br>
                â€¢ å¯¹è§’çº¿åˆ†æ•°é«˜ï¼šæ¯ä¸ªè¯å¯¹è‡ªå·±çš„æ³¨æ„åŠ›æœ€å¼º<br>
                â€¢ "çˆ±"å¯¹"å­¦ä¹ "åˆ†æ•°é«˜ï¼šåŠ¨è¯å…³æ³¨å®¾è¯­<br>
                â€¢ "å­¦ä¹ "å¯¹"AI"åˆ†æ•°é«˜ï¼šåŠ¨ä½œæŒ‡å‘ç›®æ ‡
            </p>
        </div>
        
        <!-- 7. ç»´åº¦åˆ†æ -->
        <div class="section">
            <h2 class="section-title">ä¸ƒã€ç»´åº¦å˜åŒ–åˆ†æ</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>çŸ©é˜µ</th>
                        <th>å½¢çŠ¶</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Query (Q)</strong></td>
                        <td>(seq_len, d_k)</td>
                        <td>ä¾‹ï¼š(10, 64) - 10ä¸ªè¯ï¼Œæ¯ä¸ª64ç»´</td>
                    </tr>
                    <tr>
                        <td><strong>Key (K)</strong></td>
                        <td>(seq_len, d_k)</td>
                        <td>ä¾‹ï¼š(10, 64)</td>
                    </tr>
                    <tr>
                        <td><strong>K^Tï¼ˆè½¬ç½®ï¼‰</strong></td>
                        <td>(d_k, seq_len)</td>
                        <td>ä¾‹ï¼š(64, 10)</td>
                    </tr>
                    <tr>
                        <td><strong>Q Ã— K^T</strong></td>
                        <td>(seq_len, seq_len)</td>
                        <td>ä¾‹ï¼š(10, 10) - æ¯ä¸ªè¯å¯¹æ¯ä¸ªè¯çš„åˆ†æ•°</td>
                    </tr>
                    <tr>
                        <td><strong>Scoreï¼ˆç¼©æ”¾åï¼‰</strong></td>
                        <td>(seq_len, seq_len)</td>
                        <td>ä¾‹ï¼š(10, 10) - æœ€ç»ˆæ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µ</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- 8. ä»£ç å®ç° -->
        <div class="section">
            <h2 class="section-title">å…«ã€PyTorchä»£ç å®ç°</h2>
            
            <div class="code-block">
<span style="color: #82b1ff;">import</span> torch
<span style="color: #82b1ff;">import</span> math

<span style="color: #82b1ff;">def</span> <span style="color: #ffb74d;">compute_attention_scores</span>(Q, K):
    <span style="color: #90a4ae;">"""
    è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°
    Args:
        Q: QueryçŸ©é˜µ, shape (batch, seq_len, d_k)
        K: KeyçŸ©é˜µ, shape (batch, seq_len, d_k)
    Returns:
        scores: æ³¨æ„åŠ›åˆ†æ•°, shape (batch, seq_len, seq_len)
    """</span>
    
    <span style="color: #90a4ae;"># è·å–ç»´åº¦</span>
    d_k = Q.size(-1)
    
    <span style="color: #90a4ae;"># è®¡ç®— Q Ã— K^T</span>
    scores = torch.matmul(Q, K.transpose(-2, -1))
    
    <span style="color: #90a4ae;"># é™¤ä»¥ç¼©æ”¾å› å­</span>
    scores = scores / math.sqrt(d_k)
    
    <span style="color: #82b1ff;">return</span> scores

<span style="color: #90a4ae;"># ä½¿ç”¨ç¤ºä¾‹</span>
batch_size = 2
seq_len = 10
d_k = 64

<span style="color: #90a4ae;"># ç”ŸæˆéšæœºQå’ŒK</span>
Q = torch.randn(batch_size, seq_len, d_k)
K = torch.randn(batch_size, seq_len, d_k)

<span style="color: #90a4ae;"># è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</span>
attention_scores = compute_attention_scores(Q, K)

<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"Q shape: {Q.shape}"</span>)
<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"K shape: {K.shape}"</span>)
<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"Attention Scores shape: {attention_scores.shape}"</span>)
<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"åˆ†æ•°èŒƒå›´: [{attention_scores.min():.2f}, {attention_scores.max():.2f}]"</span>)
            </div>
        </div>
        
        <!-- æ€»ç»“ -->
        <div style="background: linear-gradient(135deg, #fce4ec, #f8bbd0); padding: 30px; border-radius: 15px; margin-top: 40px;">
            <h3 style="color: #c2185b; text-align: center; margin-bottom: 20px; font-size: 1.5em;">
                âœ¨ æ ¸å¿ƒè¦ç‚¹æ€»ç»“
            </h3>
            <div style="color: #555; line-height: 2; font-size: 1.05em;">
                âœ“ æ³¨æ„åŠ›åˆ†æ•°é€šè¿‡Qå’ŒK^Tçš„çŸ©é˜µä¹˜æ³•è®¡ç®—ï¼Œè¡¡é‡è¯é—´ç›¸ä¼¼åº¦<br>
                âœ“ ç¼©æ”¾å› å­âˆšd_ké˜²æ­¢æ•°å€¼è¿‡å¤§ï¼Œä¿æŒæ¢¯åº¦ç¨³å®š<br>
                âœ“ è¾“å‡ºæ˜¯(seq_len Ã— seq_len)çš„åˆ†æ•°çŸ©é˜µï¼Œæ¯ä¸ªä½ç½®è¡¨ç¤ºä¸¤è¯å…³è”åº¦<br>
                âœ“ åˆ†æ•°è¶Šé«˜è¡¨ç¤ºä¸¤ä¸ªè¯ä¹‹é—´çš„å…³è”è¶Šå¼º<br>
                âœ“ è¿™æ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ç¬¬äºŒæ­¥ï¼Œä¸ºSoftmaxå½’ä¸€åŒ–åšå‡†å¤‡
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: #999; font-size: 0.9em;">
            <p>Â© 2025 æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—è¯¦è§£ - Transformerç³»åˆ—æ•™ç¨‹</p>
        </div>
    </div>
</body>
</html>