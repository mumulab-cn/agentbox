<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ç½®ç¼–ç åŸç†è¯¦è§£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #f3e5f5 0%, #e1f5fe 100%);
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #7b1fa2;
            margin-bottom: 15px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #7b1fa2;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #ce93d8;
        }
        
        .content-text {
            color: #555;
            font-size: 1.05em;
            line-height: 1.8;
            margin-bottom: 20px;
        }
        
        .highlight {
            color: #7b1fa2;
            font-weight: bold;
            background: #f3e5f5;
            padding: 2px 6px;
            border-radius: 3px;
        }
        
        /* é—®é¢˜æ¼”ç¤º */
        .problem-demo {
            background: #fff3e0;
            border: 3px solid #ffb74d;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .problem-title {
            color: #f57c00;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .sentence-visual {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .word-card {
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            color: #7b1fa2;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .word-card.same {
            background: linear-gradient(135deg, #ba68c8, #ab47bc);
            color: white;
        }
        
        /* æ­£å¼¦ä½™å¼¦æ³¢å½¢ */
        .wave-container {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .wave-title {
            color: #7b1fa2;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .waves-display {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .wave-box {
            flex: 1;
            min-width: 250px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .wave-label {
            color: #7b1fa2;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .wave-svg {
            width: 100%;
            height: 100px;
        }
        
        .wave-path {
            stroke: #ba68c8;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 800;
            stroke-dashoffset: 800;
            animation: drawWave 2s ease-out forwards;
        }
        
        @keyframes drawWave {
            to { stroke-dashoffset: 0; }
        }
        
        /* ä½ç½®ç¼–ç å¯è§†åŒ– */
        .position-encoding-visual {
            margin: 30px 0;
        }
        
        .position-grid {
            display: grid;
            grid-template-columns: auto repeat(8, 1fr);
            gap: 5px;
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }
        
        .grid-header {
            background: linear-gradient(135deg, #ba68c8, #ab47bc);
            color: white;
            padding: 12px;
            text-align: center;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .grid-cell {
            background: white;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            color: #7b1fa2;
            border: 1px solid #e1bee7;
            transition: all 0.3s;
        }
        
        .grid-cell:hover {
            background: #f3e5f5;
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(123, 31, 162, 0.3);
        }
        
        /* å…¬å¼å±•ç¤º */
        .formula-box {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            border-left: 5px solid #7b1fa2;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .formula {
            font-size: 1.3em;
            color: #7b1fa2;
            text-align: center;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            font-weight: bold;
        }
        
        /* å®ä¾‹è®¡ç®— */
        .calculation-demo {
            background: #e8f5e9;
            border: 2px solid #66bb6a;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .calc-title {
            color: #2e7d32;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .calc-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #66bb6a;
        }
        
        .calc-step-title {
            color: #2e7d32;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        /* å¯¹æ¯”è¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            margin: 30px 0;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, #ba68c8, #ab47bc);
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: left;
        }
        
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            color: #555;
        }
        
        .comparison-table tr:hover {
            background: #f3e5f5;
        }
        
        /* æç¤ºæ¡† */
        .tip-box {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .tip-title {
            color: #1565c0;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .tip-content {
            color: #555;
            line-height: 1.8;
        }
        
        /* ä»£ç å— */
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 25px 0;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .position-grid {
                grid-template-columns: auto repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ ä½ç½®ç¼–ç åŸç†è¯¦è§£</h1>
        <p class="subtitle">Positional Encoding - ä¸ºæ¯ä¸ªè¯æ·»åŠ ä½ç½®ä¿¡æ¯</p>
        
        <!-- 1. ä¸ºä»€ä¹ˆéœ€è¦ä½ç½®ç¼–ç  -->
        <div class="section">
            <h2 class="section-title">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ä½ç½®ç¼–ç </h2>
            
            <div class="problem-demo">
                <div class="problem-title">ğŸ¤” é—®é¢˜ï¼šTransformerå¦‚ä½•åŒºåˆ†è¯çš„é¡ºåºï¼Ÿ</div>
                <p class="content-text">
                    ä¸åŒäºRNNæŒ‰é¡ºåºå¤„ç†ï¼ŒTransformerçš„<span class="highlight">è‡ªæ³¨æ„åŠ›æœºåˆ¶</span>æ˜¯å¹¶è¡Œå¤„ç†æ‰€æœ‰è¯çš„ï¼Œ
                    <strong>æ— æ³•æ„ŸçŸ¥è¯çš„ä½ç½®ä¿¡æ¯</strong>ã€‚
                </p>
                
                <p style="color: #666; margin: 20px 0; font-weight: bold;">ä¸¾ä¾‹ï¼š</p>
                
                <div class="sentence-visual">
                    <div class="word-card same">æˆ‘</div>
                    <div class="word-card same">çˆ±</div>
                    <div class="word-card same">ä½ </div>
                </div>
                
                <div style="text-align: center; margin: 15px 0; color: #666;">ä¸</div>
                
                <div class="sentence-visual">
                    <div class="word-card same">ä½ </div>
                    <div class="word-card same">çˆ±</div>
                    <div class="word-card same">æˆ‘</div>
                </div>
                
                <p style="color: #f57c00; margin-top: 20px; font-weight: bold;">
                    åœ¨æ²¡æœ‰ä½ç½®ç¼–ç çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå¥å­å¯¹äºæ¨¡å‹æ¥è¯´æ˜¯å®Œå…¨ç›¸åŒçš„ï¼
                </p>
            </div>
            
            <div class="tip-box">
                <div class="tip-title">ğŸ’¡ ä½ç½®ç¼–ç çš„ä½œç”¨</div>
                <div class="tip-content">
                    â€¢ ä¸ºæ¯ä¸ªä½ç½®ç”Ÿæˆ<span class="highlight">å”¯ä¸€çš„ç¼–ç å‘é‡</span><br>
                    â€¢ å°†ä½ç½®ä¿¡æ¯<span class="highlight">å åŠ </span>åˆ°è¯åµŒå…¥å‘é‡ä¸Š<br>
                    â€¢ ä½¿æ¨¡å‹èƒ½å¤ŸåŒºåˆ†è¯çš„é¡ºåºå’Œç›¸å¯¹ä½ç½®<br>
                    â€¢ æ”¯æŒå¤„ç†ä»»æ„é•¿åº¦çš„åºåˆ—
                </div>
            </div>
        </div>
        
        <!-- 2. æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç  -->
        <div class="section">
            <h2 class="section-title">äºŒã€æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç å…¬å¼</h2>
            <p class="content-text">
                Transformerä½¿ç”¨<span class="highlight">æ­£å¼¦å’Œä½™å¼¦å‡½æ•°</span>ç”Ÿæˆä½ç½®ç¼–ç ï¼š
            </p>
            
            <div class="formula-box">
                <div class="formula">PE(pos, 2i) = sin(pos / 10000^(2i/d_model))</div>
                <div class="formula">PE(pos, 2i+1) = cos(pos / 10000^(2i/d_model))</div>
                <p style="color: #666; text-align: center; margin-top: 20px;">
                    â€¢ pos: è¯åœ¨å¥å­ä¸­çš„ä½ç½®ï¼ˆ0, 1, 2, ...ï¼‰<br>
                    â€¢ i: å‘é‡ç»´åº¦çš„ç´¢å¼•ï¼ˆ0 åˆ° d_model/2ï¼‰<br>
                    â€¢ d_model: å‘é‡ç»´åº¦ï¼ˆé€šå¸¸æ˜¯512ï¼‰
                </p>
            </div>
            
            <p class="content-text" style="margin-top: 25px;">
                <strong>å…³é”®ç‰¹ç‚¹ï¼š</strong>
            </p>
            <ul style="color: #555; margin-left: 30px; line-height: 2;">
                <li>å¶æ•°ç»´åº¦ä½¿ç”¨ sin å‡½æ•°</li>
                <li>å¥‡æ•°ç»´åº¦ä½¿ç”¨ cos å‡½æ•°</li>
                <li>ä¸åŒç»´åº¦ä½¿ç”¨ä¸åŒé¢‘ç‡çš„æ³¢</li>
                <li>ä½ç½®è¶Šè¿œï¼Œç¼–ç å·®å¼‚è¶Šå¤§</li>
            </ul>
        </div>
        
        <!-- 3. æ³¢å½¢å¯è§†åŒ– -->
        <div class="section">
            <h2 class="section-title">ä¸‰ã€ä¸åŒä½ç½®çš„æ³¢å½¢æ¨¡å¼</h2>
            
            <div class="wave-container">
                <div class="wave-title">ä¸åŒä½ç½®äº§ç”Ÿä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢</div>
                <div class="waves-display">
                    <div class="wave-box">
                        <div class="wave-label">ä½ç½® 0</div>
                        <svg class="wave-svg" viewBox="0 0 200 100">
                            <line x1="0" y1="50" x2="200" y2="50" stroke="#ddd" stroke-width="1"/>
                            <path class="wave-path" d="M 0,50 Q 25,20 50,50 T 100,50 T 150,50 T 200,50"/>
                        </svg>
                    </div>
                    
                    <div class="wave-box">
                        <div class="wave-label">ä½ç½® 1</div>
                        <svg class="wave-svg" viewBox="0 0 200 100">
                            <line x1="0" y1="50" x2="200" y2="50" stroke="#ddd" stroke-width="1"/>
                            <path class="wave-path" d="M 0,50 Q 25,25 50,50 T 100,50 T 150,50 T 200,50" style="animation-delay: 0.2s;"/>
                        </svg>
                    </div>
                    
                    <div class="wave-box">
                        <div class="wave-label">ä½ç½® 2</div>
                        <svg class="wave-svg" viewBox="0 0 200 100">
                            <line x1="0" y1="50" x2="200" y2="50" stroke="#ddd" stroke-width="1"/>
                            <path class="wave-path" d="M 0,50 Q 25,30 50,50 T 100,50 T 150,50 T 200,50" style="animation-delay: 0.4s;"/>
                        </svg>
                    </div>
                    
                    <div class="wave-box">
                        <div class="wave-label">ä½ç½® 3</div>
                        <svg class="wave-svg" viewBox="0 0 200 100">
                            <line x1="0" y1="50" x2="200" y2="50" stroke="#ddd" stroke-width="1"/>
                            <path class="wave-path" d="M 0,50 Q 25,35 50,50 T 100,50 T 150,50 T 200,50" style="animation-delay: 0.6s;"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 4. ä½ç½®ç¼–ç çŸ©é˜µ -->
        <div class="section">
            <h2 class="section-title">å››ã€ä½ç½®ç¼–ç çŸ©é˜µå¯è§†åŒ–</h2>
            <p class="content-text">
                ä½ç½®ç¼–ç æ˜¯ä¸€ä¸ª<span class="highlight">åºåˆ—é•¿åº¦ Ã— å‘é‡ç»´åº¦</span>çš„çŸ©é˜µï¼š
            </p>
            
            <div class="position-encoding-visual">
                <div class="position-grid">
                    <div class="grid-header">ä½ç½®</div>
                    <div class="grid-header">ç»´åº¦0</div>
                    <div class="grid-header">ç»´åº¦1</div>
                    <div class="grid-header">ç»´åº¦2</div>
                    <div class="grid-header">ç»´åº¦3</div>
                    <div class="grid-header">ç»´åº¦4</div>
                    <div class="grid-header">ç»´åº¦5</div>
                    <div class="grid-header">ç»´åº¦6</div>
                    <div class="grid-header">ç»´åº¦7</div>
                    
                    <div class="grid-header">0</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    
                    <div class="grid-header">1</div>
                    <div class="grid-cell">0.84</div>
                    <div class="grid-cell">0.54</div>
                    <div class="grid-cell">0.10</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.01</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    
                    <div class="grid-header">2</div>
                    <div class="grid-cell">0.91</div>
                    <div class="grid-cell">-0.42</div>
                    <div class="grid-cell">0.20</div>
                    <div class="grid-cell">0.98</div>
                    <div class="grid-cell">0.02</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                    
                    <div class="grid-header">3</div>
                    <div class="grid-cell">0.14</div>
                    <div class="grid-cell">-0.99</div>
                    <div class="grid-cell">0.30</div>
                    <div class="grid-cell">0.95</div>
                    <div class="grid-cell">0.03</div>
                    <div class="grid-cell">1.00</div>
                    <div class="grid-cell">0.00</div>
                    <div class="grid-cell">1.00</div>
                </div>
                <p style="color: #666; text-align: center; margin-top: 15px;">
                    å®é™…ç»´åº¦ä¸º512ï¼Œè¿™é‡Œç®€åŒ–ä¸º8ç»´å±•ç¤º
                </p>
            </div>
        </div>
        
        <!-- 5. è®¡ç®—å®ä¾‹ -->
        <div class="section">
            <h2 class="section-title">äº”ã€å®Œæ•´è®¡ç®—ç¤ºä¾‹</h2>
            
            <div class="calculation-demo">
                <div class="calc-title">ğŸ§® è®¡ç®—ä½ç½®1ã€ç»´åº¦0çš„ç¼–ç å€¼</div>
                
                <div class="calc-step">
                    <div class="calc-step-title">ç¬¬1æ­¥ï¼šç¡®å®šå‚æ•°</div>
                    <div style="color: #555; line-height: 1.8;">
                        â€¢ pos = 1ï¼ˆç¬¬2ä¸ªè¯ï¼‰<br>
                        â€¢ i = 0ï¼ˆç¬¬1ä¸ªç»´åº¦ï¼Œæ˜¯å¶æ•°ï¼Œç”¨sinï¼‰<br>
                        â€¢ d_model = 512
                    </div>
                </div>
                
                <div class="calc-step">
                    <div class="calc-step-title">ç¬¬2æ­¥ï¼šè®¡ç®—é¢‘ç‡</div>
                    <div style="color: #555; line-height: 1.8;">
                        freq = 1 / 10000^(2Ã—0/512) = 1 / 10000^0 = 1
                    </div>
                </div>
                
                <div class="calc-step">
                    <div class="calc-step-title">ç¬¬3æ­¥ï¼šè®¡ç®—è§’åº¦</div>
                    <div style="color: #555; line-height: 1.8;">
                        angle = pos Ã— freq = 1 Ã— 1 = 1
                    </div>
                </div>
                
                <div class="calc-step">
                    <div class="calc-step-title">ç¬¬4æ­¥ï¼šåº”ç”¨sinå‡½æ•°</div>
                    <div style="color: #555; line-height: 1.8;">
                        PE(1, 0) = sin(1) â‰ˆ <strong style="color: #2e7d32;">0.8414</strong>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 6. å¦‚ä½•ä½¿ç”¨ -->
        <div class="section">
            <h2 class="section-title">å…­ã€ä½ç½®ç¼–ç çš„ä½¿ç”¨æ–¹å¼</h2>
            <p class="content-text">
                ä½ç½®ç¼–ç é€šè¿‡<span class="highlight">ç›¸åŠ </span>çš„æ–¹å¼èå…¥è¯åµŒå…¥ï¼š
            </p>
            
            <div class="formula-box">
                <div class="formula">æœ€ç»ˆè¾“å…¥ = Token Embedding + Positional Encoding</div>
                <div style="margin-top: 25px; padding: 20px; background: white; border-radius: 8px;">
                    <p style="color: #555; line-height: 2;">
                        <strong style="color: #7b1fa2;">ç¤ºä¾‹ï¼š</strong><br>
                        è¯åµŒå…¥: [0.5, -0.2, 0.8, 0.1, ...]  (512ç»´)<br>
                        ä½ç½®ç¼–ç : [0.84, 0.54, 0.10, 1.00, ...]  (512ç»´)<br>
                        <strong>ç›¸åŠ å: [1.34, 0.34, 0.90, 1.10, ...]  (512ç»´)</strong>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- 7. ä¼˜åŠ¿åˆ†æ -->
        <div class="section">
            <h2 class="section-title">ä¸ƒã€æ­£å¼¦ä½™å¼¦ç¼–ç çš„ä¼˜åŠ¿</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ç‰¹ç‚¹</th>
                        <th>è¯´æ˜</th>
                        <th>ä¼˜åŠ¿</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ç¡®å®šæ€§</strong></td>
                        <td>æ¯ä¸ªä½ç½®çš„ç¼–ç æ˜¯å›ºå®šçš„æ•°å­¦å‡½æ•°</td>
                        <td>æ— éœ€å­¦ä¹ å‚æ•°ï¼ŒèŠ‚çœè®¡ç®—</td>
                    </tr>
                    <tr>
                        <td><strong>æ— é™é•¿åº¦</strong></td>
                        <td>å¯ä»¥ä¸ºä»»æ„é•¿åº¦çš„åºåˆ—ç”Ÿæˆç¼–ç </td>
                        <td>æ”¯æŒè¶…å‡ºè®­ç»ƒé•¿åº¦çš„æ¨ç†</td>
                    </tr>
                    <tr>
                        <td><strong>ç›¸å¯¹ä½ç½®</strong></td>
                        <td>ä»»æ„ä¸¤ä¸ªä½ç½®çš„ç¼–ç å¯ä»¥é€šè¿‡çº¿æ€§ç»„åˆå¾—åˆ°</td>
                        <td>æ¨¡å‹èƒ½å­¦ä¹ ç›¸å¯¹ä½ç½®å…³ç³»</td>
                    </tr>
                    <tr>
                        <td><strong>å‘¨æœŸæ€§</strong></td>
                        <td>ä½¿ç”¨å¤šä¸ªé¢‘ç‡çš„æ³¢ï¼Œæ•æ‰ä¸åŒå°ºåº¦çš„ä½ç½®ä¿¡æ¯</td>
                        <td>æ—¢èƒ½åŒºåˆ†è¿‘é‚»ï¼Œä¹Ÿèƒ½åŒºåˆ†è¿œè·ç¦»</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- 8. å¯¹æ¯”å­¦ä¹ å¼ä½ç½®ç¼–ç  -->
        <div class="section">
            <h2 class="section-title">å…«ã€ä¸å­¦ä¹ å¼ä½ç½®ç¼–ç å¯¹æ¯”</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ç±»å‹</th>
                        <th>åŸç†</th>
                        <th>ä¼˜ç‚¹</th>
                        <th>ç¼ºç‚¹</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>æ­£å¼¦ä½™å¼¦ç¼–ç </strong></td>
                        <td>ä½¿ç”¨æ•°å­¦å…¬å¼ç”Ÿæˆ</td>
                        <td>â€¢ æ— éœ€è®­ç»ƒ<br>â€¢ æ”¯æŒä»»æ„é•¿åº¦<br>â€¢ æ³›åŒ–èƒ½åŠ›å¼º</td>
                        <td>â€¢ å›ºå®šæ¨¡å¼<br>â€¢ æ— æ³•é’ˆå¯¹ä»»åŠ¡ä¼˜åŒ–</td>
                    </tr>
                    <tr>
                        <td><strong>å­¦ä¹ å¼ç¼–ç </strong></td>
                        <td>ä½œä¸ºå‚æ•°åœ¨è®­ç»ƒä¸­å­¦ä¹ </td>
                        <td>â€¢ å¯ä»¥å­¦ä¹ ä»»åŠ¡ç‰¹å®šæ¨¡å¼<br>â€¢ çµæ´»æ€§é«˜</td>
                        <td>â€¢ éœ€è¦è®­ç»ƒ<br>â€¢ é•¿åº¦å—é™<br>â€¢ æ³›åŒ–æ€§å·®</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="tip-box">
                <div class="tip-title">ğŸ“Œ å®é™…åº”ç”¨</div>
                <div class="tip-content">
                    â€¢ <strong>åŸå§‹Transformerï¼š</strong>ä½¿ç”¨æ­£å¼¦ä½™å¼¦ç¼–ç <br>
                    â€¢ <strong>BERTï¼š</strong>ä½¿ç”¨å­¦ä¹ å¼ä½ç½®ç¼–ç ï¼Œæœ€å¤§é•¿åº¦512<br>
                    â€¢ <strong>GPTç³»åˆ—ï¼š</strong>ä½¿ç”¨å­¦ä¹ å¼ä½ç½®ç¼–ç <br>
                    â€¢ <strong>ç°ä»£æ”¹è¿›ï¼š</strong>ç›¸å¯¹ä½ç½®ç¼–ç ã€æ—‹è½¬ä½ç½®ç¼–ç ï¼ˆRoPEï¼‰ç­‰
                </div>
            </div>
        </div>
        
        <!-- 9. ä»£ç å®ç° -->
        <div class="section">
            <h2 class="section-title">ä¹ã€PyTorchä»£ç å®ç°</h2>
            
            <div class="code-block">
<span style="color: #82b1ff;">import</span> torch
<span style="color: #82b1ff;">import</span> torch.nn <span style="color: #82b1ff;">as</span> nn
<span style="color: #82b1ff;">import</span> math

<span style="color: #82b1ff;">class</span> <span style="color: #ffb74d;">PositionalEncoding</span>(nn.Module):
    <span style="color: #82b1ff;">def</span> <span style="color: #ffb74d;">__init__</span>(self, d_model=512, max_len=5000):
        super().__init__()
        
        <span style="color: #90a4ae;"># åˆ›å»ºä½ç½®ç¼–ç çŸ©é˜µ</span>
        pe = torch.zeros(max_len, d_model)
        
        <span style="color: #90a4ae;"># ä½ç½®ç´¢å¼•: [0, 1, 2, ..., max_len-1]</span>
        position = torch.arange(0, max_len).unsqueeze(1)
        
        <span style="color: #90a4ae;"># è®¡ç®—é¢‘ç‡: 10000^(2i/d_model)</span>
        div_term = torch.exp(
            torch.arange(0, d_model, 2) * -(math.log(10000.0) / d_model)
        )
        
        <span style="color: #90a4ae;"># å¶æ•°ç»´åº¦ä½¿ç”¨sin</span>
        pe[:, 0::2] = torch.sin(position * div_term)
        
        <span style="color: #90a4ae;"># å¥‡æ•°ç»´åº¦ä½¿ç”¨cos</span>
        pe[:, 1::2] = torch.cos(position * div_term)
        
        <span style="color: #90a4ae;"># å¢åŠ batchç»´åº¦: (1, max_len, d_model)</span>
        pe = pe.unsqueeze(0)
        
        <span style="color: #90a4ae;"># æ³¨å†Œä¸ºbufferï¼Œä¸å‚ä¸æ¢¯åº¦æ›´æ–°</span>
        self.register_buffer(<span style="color: #aed581;">'pe'</span>, pe)
    
    <span style="color: #82b1ff;">def</span> <span style="color: #ffb74d;">forward</span>(self, x):
        <span style="color: #90a4ae;"># x shape: (batch_size, seq_len, d_model)</span>
        <span style="color: #90a4ae;"># å°†ä½ç½®ç¼–ç åŠ åˆ°è¾“å…¥ä¸Š</span>
        x = x + self.pe[:, :x.size(1), :]
        <span style="color: #82b1ff;">return</span> x

<span style="color: #90a4ae;"># ä½¿ç”¨ç¤ºä¾‹</span>
d_model = 512
seq_len = 10
batch_size = 2

<span style="color: #90a4ae;"># è¯åµŒå…¥è¾“å‡º</span>
embeddings = torch.randn(batch_size, seq_len, d_model)

<span style="color: #90a4ae;"># æ·»åŠ ä½ç½®ç¼–ç </span>
pe = PositionalEncoding(d_model)
output = pe(embeddings)

<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"è¾“å…¥å½¢çŠ¶: {embeddings.shape}"</span>)
<span style="color: #82b1ff;">print</span>(<span style="color: #aed581;">f"è¾“å‡ºå½¢çŠ¶: {output.shape}"</span>)
            </div>
        </div>
        
        <!-- æ€»ç»“ -->
        <div style="background: linear-gradient(135deg, #f3e5f5, #e1bee7); padding: 30px; border-radius: 15px; margin-top: 40px;">
            <h3 style="color: #7b1fa2; text-align: center; margin-bottom: 20px; font-size: 1.5em;">
                âœ¨ æ ¸å¿ƒè¦ç‚¹æ€»ç»“
            </h3>
            <div style="color: #555; line-height: 2; font-size: 1.05em;">
                âœ“ ä½ç½®ç¼–ç ä¸ºå¹¶è¡Œå¤„ç†çš„Transformeræä¾›è¯åºä¿¡æ¯<br>
                âœ“ ä½¿ç”¨æ­£å¼¦ä½™å¼¦å‡½æ•°ç”Ÿæˆï¼Œä¸åŒä½ç½®äº§ç”Ÿä¸åŒçš„ç¼–ç æ¨¡å¼<br>
                âœ“ é€šè¿‡ç›¸åŠ æ–¹å¼èå…¥è¯åµŒå…¥ï¼Œç»´åº¦ä¿æŒä¸€è‡´<br>
                âœ“ æ”¯æŒä»»æ„é•¿åº¦åºåˆ—ï¼Œæ— éœ€é¢å¤–è®­ç»ƒå‚æ•°<br>
                âœ“ ä½¿æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ è¯ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: #999; font-size: 0.9em;">
            <p>Â© 2025 ä½ç½®ç¼–ç åŸç†è¯¦è§£ - Transformerç³»åˆ—æ•™ç¨‹</p>
        </div>
    </div>
</body>
</html>