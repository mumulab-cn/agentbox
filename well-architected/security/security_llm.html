<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæˆå¼AIåº”ç”¨å…¨æ ˆæ¶æ„ - é«˜å¯ç”¨é«˜å¯é å¹³å°</title>
    <link href="http://localhost/0530/src/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .feature-icon {
            font-size: 2.5rem;
            color: #0d6efd;
            margin-bottom: 1rem;
        }
        .architecture-card {
            transition: transform 0.3s ease;
        }
        .architecture-card:hover {
            transform: translateY(-5px);
        }
        .metric-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            margin: 0.25rem;
            border-radius: 0.25rem;
            background-color: #e9ecef;
            font-size: 0.875rem;
        }
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }
        .status-healthy {
            background-color: #28a745;
        }
        .status-warning {
            background-color: #ffc107;
        }
        .status-error {
            background-color: #dc3545;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" ></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="js/security_sandbox.js"></script>
</head>
<body><!-- Tabé¡µå¯¼èˆª -->
    <ul class="nav nav-tabs" id="modelTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="tuning-tab" type="button" role="tab" onclick="window.location.href='security.html'">å†…å®¹å®‰å…¨</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="models-tab" data-bs-toggle="tab" data-bs-target="#models" type="button" role="tab">æ¨¡å‹æƒé™</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="tuning-tab" type="button" role="tab" onclick="window.location.href='security_data.html'">æ•°æ®å®‰å…¨</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="tuning-tab" type="button" role="tab" onclick="window.location.href='security_network.html'">ç½‘ç»œå®‰å…¨</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="tuning-tab" type="button" role="tab" onclick="window.location.href='security_audit.html'">å®‰å…¨å®¡è®¡</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="tuning-tab" type="button" role="tab" onclick="window.location.href='security_compliance.html'">åˆè§„</button>
        </li>
    </ul>

    <main>
        <!-- å¼¹æ€§æ‰©å±•æ¨¡å— -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card architecture-card">
                    <div class="card-body">
                        <div class="mb-4 p-3 bg-light rounded">
                            <h5><i class="bi bi-lock-fill"></i> åŒé‡åŠ å¯†åŸç†</h5>
                            <svg width="100%" height="80" class="mb-2">
                                <rect x="15%" y="30" width="20%" height="20" fill="#0d6efd" opacity="0.8"/>
                                <text x="25%" y="45" fill="white">ç½‘ç»œå±‚åŠ å¯†</text>
                                <rect x="45%" y="30" width="20%" height="20" fill="#6f42c1" opacity="0.8"/>
                                <text x="55%" y="45" fill="white">åº”ç”¨å±‚åŠ å¯†</text>
                                <path d="M65% 40 H85%" stroke="#28a745" stroke-width="2" stroke-dasharray="5"/>
                            </svg>
                            <p class="text-muted">ç½‘ç»œå±‚åŠ å¯†å¦‚åŒä¿é™©ç®±ï¼Œåº”ç”¨å±‚åŠ å¯†åˆ™æ˜¯ç®±å†…å¯†ç é”ï¼ŒåŒé‡ä¿æŠ¤ç¡®ä¿æ•°æ®å…¨é“¾è·¯å®‰å…¨ã€‚</p>
                        </div>
                        <h2 class="card-title mb-4">
                            <i class="bi bi-cloud me-2"></i>OneAPI
                        </h2>
                        <div class="row g-4">
                            <!-- å®‰å…¨æ²™ç®±å®¹å™¨ -->
                            <div class="col-12 mb-4">
                                <div class="card sandbox-container">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0"><i class="bi bi-shield-lock"></i> å®‰å…¨æ²™ç®±ç¯å¢ƒ</h5>
                                    </div>
                                    <div class="card-body p-4">
                                        <div class="sandbox-visual mb-3">
                                            <svg class="sandbox-diagram" viewBox="0 0 800 200" width="100%" height="200">
                                                <!-- æ²™ç®±è¾¹æ¡† -->
                                                <rect x="50" y="20" width="700" height="160" rx="10" ry="10" fill="#f8f9fa" stroke="#6f42c1" stroke-width="2" stroke-dasharray="5" />
                                                
                                                <!-- ç”¨æˆ·ç«¯ -->
                                                <rect x="100" y="60" width="150" height="80" rx="5" ry="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2" />
                                                <text x="175" y="50" text-anchor="middle" fill="#0d6efd" font-weight="bold">ç”¨æˆ·ç«¯</text>
                                                <circle id="user-data" cx="130" cy="100" r="8" fill="#0d6efd" />
                                                
                                                <!-- æ¨¡å‹æ¨ç†æœåŠ¡ -->
                                                <rect x="550" y="60" width="150" height="80" rx="5" ry="5" fill="#e7f9ef" stroke="#28a745" stroke-width="2" />
                                                <text x="625" y="50" text-anchor="middle" fill="#28a745" font-weight="bold">æ¨¡å‹æ¨ç†æœåŠ¡</text>
                                                <circle id="model-result" cx="670" cy="100" r="8" fill="#28a745" />
                                                
                                                <!-- åŠ å¯†/è§£å¯†èŠ‚ç‚¹ -->
                                                <rect x="325" y="40" width="150" height="120" rx="5" ry="5" fill="#f8f0fc" stroke="#6f42c1" stroke-width="2" />
                                                <text x="400" y="30" text-anchor="middle" fill="#6f42c1" font-weight="bold">åŠ å¯†/è§£å¯†å¤„ç†</text>
                                                <circle id="encrypt-node" cx="400" cy="80" r="15" fill="#6f42c1" />
                                                <text x="400" y="85" text-anchor="middle" fill="white" font-size="18">ğŸ”’</text>
                                                <circle id="decrypt-node" cx="400" cy="120" r="15" fill="#6f42c1" />
                                                <text x="400" y="125" text-anchor="middle" fill="white" font-size="18">ğŸ”“</text>
                                                
                                                <!-- è¿æ¥è·¯å¾„ -->
                                                <path id="request-path" d="M150 100 H325" stroke="#0d6efd" stroke-width="3" stroke-dasharray="10" />
                                                <path id="process-path" d="M400 85 L400 115" stroke="#6f42c1" stroke-width="3" />
                                                <path id="response-path" d="M475 100 H550" stroke="#28a745" stroke-width="3" stroke-dasharray="10" />
                                                
                                                <!-- æ•°æ®åŒ… -->
                                                <circle id="data-packet" cx="150" cy="100" r="6" fill="#dc3545">
                                                    <animate id="request-anim" attributeName="cx" from="150" to="325" dur="3s" begin="0s;response-anim.end+1s" fill="freeze" />
                                                    <animate id="encrypt-anim" attributeName="cy" from="80" to="120" dur="1s" begin="request-anim.end" fill="freeze" />
                                                    <animate id="response-anim" attributeName="cx" from="475" to="650" dur="3s" begin="encrypt-anim.end" fill="freeze" />
                                                </circle>
                                            </svg>
                                        </div>
                                        
                                        <div class="row">
                                            <!-- ç”¨æˆ·ç«¯æ¨¡å— -->
                                            <div class="col-md-4">
                                                <div class="card h-100 encryption-step" id="user-module">
                                                    <div class="card-body">
                                                        <h6 class="card-title"><i class="bi bi-person-badge"></i> ç”¨æˆ·ç«¯</h6>
                                                        <pre class="bg-light p-2 mt-2 small">
// ç”¨æˆ·è¯·æ±‚åŠ å¯†
function secureRequest(data) {
  // åº”ç”¨å±‚åŠ å¯†
  const encryptedData = AES.encrypt(
    JSON.stringify(data),
    sessionKey
  );
  // ç½‘ç»œå±‚åŠ å¯†
  return TLS.secureChannel(encryptedData);
}</pre>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- åŠ å¯†å¤„ç†æ¨¡å— -->
                                            <div class="col-md-4">
                                                <div class="card h-100 encryption-step" id="sandbox-module">
                                                    <div class="card-body">
                                                        <h6 class="card-title"><i class="bi bi-shield-lock"></i> æ²™ç®±å¤„ç†</h6>
                                                        <pre class="bg-light p-2 mt-2 small">
// æ²™ç®±å†…å­˜å®‰å…¨å¤„ç†
function processInSandbox(encryptedData) {
  // å†…å­˜éš”ç¦»åŒºè§£å¯†
  const secureMemory = createIsolatedMemory();
  const plaintext = secureMemory.decrypt(
    encryptedData, privateKey
  );
  // å¤„ç†åç«‹å³æ¸…é™¤å†…å­˜
  const result = model.inference(plaintext);
  secureMemory.clear();
  return result;
}</pre>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- æ¨¡å‹æ¨ç†æ¨¡å— -->
                                            <div class="col-md-4">
                                                <div class="card h-100 encryption-step" id="model-module">
                                                    <div class="card-body">
                                                        <h6 class="card-title"><i class="bi bi-cpu"></i> æ¨¡å‹æ¨ç†</h6>
                                                        <pre class="bg-light p-2 mt-2 small">
// æ¨¡å‹æ¨ç†ä¸å“åº”åŠ å¯†
function secureResponse(result) {
  // ç»“æœåŠ å¯†
  const encryptedResult = RSA.encrypt(
    JSON.stringify(result),
    publicKey
  );
  // ç­¾åéªŒè¯
  return {
    data: encryptedResult,
    signature: createSignature(encryptedResult)
  };
}</pre>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ­¥éª¤æ§åˆ¶åŒº -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="d-flex justify-content-center gap-2">
                    <button class="btn btn-outline-primary step-btn active" data-step="1">ç”¨æˆ·è¯·æ±‚</button>
                    <button class="btn btn-outline-primary step-btn" data-step="2">æ²™ç®±åŠ å¯†å¤„ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="3">æ¨¡å‹æ¨ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="4">æ²™ç®±è§£å¯†å¤„ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="5">å®‰å…¨å“åº”</button>
                </div>
            </div>
        </div>

        <!-- åŠ¨ç”»æ ·å¼ -->
        <style>
            .encryption-step.active {
                border: 2px solid #0d6efd;
                box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15);
            }
            .sandbox-container {
                border: 2px solid transparent;
                transition: all 0.3s ease;
            }
            .sandbox-container.active {
                border-color: #6f42c1;
                box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
            }
            .sandbox-diagram {
                transition: all 0.5s ease;
            }
            @keyframes pulse {
                0% { opacity: 0.7; }
                50% { opacity: 1; }
                100% { opacity: 0.7; }
            }
            @keyframes dashFlow {
                to { stroke-dashoffset: 20; }
            }
            #request-path, #response-path {
                animation: dashFlow 1s linear infinite;
            }
            #data-packet {
                animation: pulse 2s infinite;
            }
            .step-description {
                height: 80px;
                overflow: hidden;
                transition: all 0.3s ease;
            }
        </style>

        <!-- äº¤äº’è„šæœ¬ -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // åˆå§‹åŒ–å®‰å…¨æ²™ç®±
                const sandbox = new SecuritySandbox();
                sandbox.initialize();
                
                // çŠ¶æ€ä¿¡æ¯æ˜¾ç¤ºåŒº
                const statusContainer = document.createElement('div');
                statusContainer.className = 'mt-3 p-2 bg-light rounded small';
                statusContainer.id = 'sandbox-status';
                document.querySelector('.sandbox-container .card-body').appendChild(statusContainer);
                
                // åˆå§‹åŒ–ç¬¬ä¸€æ­¥
                highlightStep(1);
                
                // ç»‘å®šæ­¥éª¤æŒ‰é’®äº‹ä»¶
                document.querySelectorAll('.step-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const step = parseInt(btn.dataset.step);
                        highlightStep(step);
                        simulateProcessStep(step, sandbox);
                    });
                });
                
                // é«˜äº®ç‰¹å®šæ­¥éª¤
                function highlightStep(step) {
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    document.querySelectorAll('.step-btn').forEach(b => {
                        b.classList.toggle('active', parseInt(b.dataset.step) === step);
                    });
                    
                    // é‡ç½®æ‰€æœ‰æ¨¡å—
                    document.querySelectorAll('.encryption-step').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    // é«˜äº®æ²™ç®±å®¹å™¨
                    const sandboxContainer = document.querySelector('.sandbox-container');
                    sandboxContainer.classList.add('active');
                    
                    // æ ¹æ®æ­¥éª¤é«˜äº®ç‰¹å®šæ¨¡å—
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚
                            document.getElementById('user-module').classList.add('active');
                            break;
                        case 2: // æ²™ç®±åŠ å¯†å¤„ç†
                            document.getElementById('sandbox-module').classList.add('active');
                            break;
                        case 3: // æ¨¡å‹æ¨ç†
                            document.getElementById('model-module').classList.add('active');
                            break;
                        case 4: // æ²™ç®±è§£å¯†å¤„ç†
                            document.getElementById('sandbox-module').classList.add('active');
                            break;
                        case 5: // å®‰å…¨å“åº”
                            document.getElementById('user-module').classList.add('active');
                            break;
                    }
                    
                    // æ§åˆ¶åŠ¨ç”»
                    controlAnimation(step);
                }
                
                // æ§åˆ¶SVGåŠ¨ç”»
                function controlAnimation(step) {
                    const dataPacket = document.getElementById('data-packet');
                    if (!dataPacket) return;
                    
                    // é‡ç½®åŠ¨ç”»ä½ç½®
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚ - æ•°æ®åŒ…ä½äºç”¨æˆ·ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '150');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                        case 2: // æ²™ç®±åŠ å¯† - æ•°æ®åŒ…ä½äºåŠ å¯†èŠ‚ç‚¹
                            dataPacket.setAttributeNS(null, 'cx', '400');
                            dataPacket.setAttributeNS(null, 'cy', '80');
                            break;
                        case 3: // æ¨¡å‹æ¨ç† - æ•°æ®åŒ…ä½äºæ¨¡å‹ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '650');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                        case 4: // æ²™ç®±è§£å¯† - æ•°æ®åŒ…ä½äºè§£å¯†èŠ‚ç‚¹
                            dataPacket.setAttributeNS(null, 'cx', '400');
                            dataPacket.setAttributeNS(null, 'cy', '120');
                            break;
                        case 5: // å®‰å…¨å“åº” - æ•°æ®åŒ…è¿”å›ç”¨æˆ·ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '150');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                    }
                    
                    // æ ¹æ®æ­¥éª¤æ’­æ”¾ç›¸åº”åŠ¨ç”»
                    if (step === 1) {
                        const requestAnim = document.getElementById('request-anim');
                        if (requestAnim) requestAnim.beginElement();
                    } else if (step === 2) {
                        const encryptAnim = document.getElementById('encrypt-anim');
                        if (encryptAnim) encryptAnim.beginElement();
                    } else if (step === 3) {
                        const responseAnim = document.getElementById('response-anim');
                        if (responseAnim) responseAnim.beginElement();
                    }
                }
                
                // æ¨¡æ‹Ÿæ²™ç®±å¤„ç†æ­¥éª¤
                function simulateProcessStep(step, sandbox) {
                    const statusEl = document.getElementById('sandbox-status');
                    let statusHTML = '';
                    
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚
                            statusHTML = '<strong>ç”¨æˆ·è¯·æ±‚é˜¶æ®µ</strong><br>å‡†å¤‡å‘é€åŠ å¯†è¯·æ±‚åˆ°å®‰å…¨æ²™ç®±...';
                            setTimeout(() => {
                                const userData = { query: 'è¯·åˆ†æè¿™æ®µæ–‡æœ¬çš„æƒ…æ„Ÿ', text: 'è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡æœ¬' };
                                const securePacket = sandbox.processRequest(userData);
                                statusEl.innerHTML += '<br>âœ… è¯·æ±‚å·²åŠ å¯†å¹¶å‘é€';
                                sandbox.logAudit('ç”¨æˆ·è¯·æ±‚', { action: 'å‘é€è¯·æ±‚', status: 'success' });
                            }, 1000);
                            break;
                            
                        case 2: // æ²™ç®±åŠ å¯†å¤„ç†
                            statusHTML = '<strong>æ²™ç®±åŠ å¯†å¤„ç†é˜¶æ®µ</strong><br>åœ¨éš”ç¦»å†…å­˜ä¸­å¤„ç†åŠ å¯†æ•°æ®...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… åº”ç”¨å±‚è§£å¯†å®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… ç½‘ç»œå±‚è§£å¯†å®Œæˆ';
                                    sandbox.logAudit('æ²™ç®±å¤„ç†', { action: 'è§£å¯†æ•°æ®', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                            
                        case 3: // æ¨¡å‹æ¨ç†
                            statusHTML = '<strong>æ¨¡å‹æ¨ç†é˜¶æ®µ</strong><br>åœ¨å®‰å…¨ç¯å¢ƒä¸­æ‰§è¡Œæ¨¡å‹æ¨ç†...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… æ¨¡å‹æ¨ç†å®Œæˆ';
                                sandbox.logAudit('æ¨¡å‹æ¨ç†', { action: 'æ‰§è¡Œæ¨ç†', status: 'success' });
                            }, 1500);
                            break;
                            
                        case 4: // æ²™ç®±è§£å¯†å¤„ç†
                            statusHTML = '<strong>æ²™ç®±åŠ å¯†å“åº”é˜¶æ®µ</strong><br>å¯¹æ¨¡å‹ç»“æœè¿›è¡Œå®‰å…¨å¤„ç†...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… ç»“æœç­¾åå®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… ç»“æœåŠ å¯†å®Œæˆ';
                                    sandbox.logAudit('æ²™ç®±å¤„ç†', { action: 'åŠ å¯†å“åº”', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                            
                        case 5: // å®‰å…¨å“åº”
                            statusHTML = '<strong>å®‰å…¨å“åº”é˜¶æ®µ</strong><br>å°†åŠ å¯†å“åº”è¿”å›ç»™ç”¨æˆ·...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… å“åº”éªŒè¯å®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… å“åº”è§£å¯†å®Œæˆ';
                                    sandbox.logAudit('ç”¨æˆ·å“åº”', { action: 'æ¥æ”¶å“åº”', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                    }
                    
                    statusEl.innerHTML = statusHTML;
                }
            });
        </script>
        <!-- æ­¥éª¤æ§åˆ¶åŒº -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="d-flex justify-content-center gap-2">
                    <button class="btn btn-outline-primary step-btn active" data-step="1">ç”¨æˆ·è¯·æ±‚</button>
                    <button class="btn btn-outline-primary step-btn" data-step="2">æ²™ç®±åŠ å¯†å¤„ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="3">æ¨¡å‹æ¨ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="4">æ²™ç®±è§£å¯†å¤„ç†</button>
                    <button class="btn btn-outline-primary step-btn" data-step="5">å®‰å…¨å“åº”</button>
                </div>
            </div>
        </div>

        <!-- åŠ¨ç”»æ ·å¼ -->
        <style>
            .encryption-step.active {
                border: 2px solid #0d6efd;
                box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15);
            }
            .sandbox-container {
                border: 2px solid transparent;
                transition: all 0.3s ease;
            }
            .sandbox-container.active {
                border-color: #6f42c1;
                box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
            }
            .sandbox-diagram {
                transition: all 0.5s ease;
            }
            @keyframes pulse {
                0% { opacity: 0.7; }
                50% { opacity: 1; }
                100% { opacity: 0.7; }
            }
            @keyframes dashFlow {
                to { stroke-dashoffset: 20; }
            }
            #request-path, #response-path {
                animation: dashFlow 1s linear infinite;
            }
            #data-packet {
                animation: pulse 2s infinite;
            }
            .step-description {
                height: 80px;
                overflow: hidden;
                transition: all 0.3s ease;
            }
        </style>

        <!-- äº¤äº’è„šæœ¬ -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // åˆå§‹åŒ–å®‰å…¨æ²™ç®±
                const sandbox = new SecuritySandbox();
                sandbox.initialize();
                
                // çŠ¶æ€ä¿¡æ¯æ˜¾ç¤ºåŒº
                const statusContainer = document.createElement('div');
                statusContainer.className = 'mt-3 p-2 bg-light rounded small';
                statusContainer.id = 'sandbox-status';
                document.querySelector('.sandbox-container .card-body').appendChild(statusContainer);
                
                // åˆå§‹åŒ–ç¬¬ä¸€æ­¥
                highlightStep(1);
                
                // ç»‘å®šæ­¥éª¤æŒ‰é’®äº‹ä»¶
                document.querySelectorAll('.step-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const step = parseInt(btn.dataset.step);
                        highlightStep(step);
                        simulateProcessStep(step, sandbox);
                    });
                });
                
                // é«˜äº®ç‰¹å®šæ­¥éª¤
                function highlightStep(step) {
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    document.querySelectorAll('.step-btn').forEach(b => {
                        b.classList.toggle('active', parseInt(b.dataset.step) === step);
                    });
                    
                    // é‡ç½®æ‰€æœ‰æ¨¡å—
                    document.querySelectorAll('.encryption-step').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    // é«˜äº®æ²™ç®±å®¹å™¨
                    const sandboxContainer = document.querySelector('.sandbox-container');
                    sandboxContainer.classList.add('active');
                    
                    // æ ¹æ®æ­¥éª¤é«˜äº®ç‰¹å®šæ¨¡å—
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚
                            document.getElementById('user-module').classList.add('active');
                            break;
                        case 2: // æ²™ç®±åŠ å¯†å¤„ç†
                            document.getElementById('sandbox-module').classList.add('active');
                            break;
                        case 3: // æ¨¡å‹æ¨ç†
                            document.getElementById('model-module').classList.add('active');
                            break;
                        case 4: // æ²™ç®±è§£å¯†å¤„ç†
                            document.getElementById('sandbox-module').classList.add('active');
                            break;
                        case 5: // å®‰å…¨å“åº”
                            document.getElementById('user-module').classList.add('active');
                            break;
                    }
                    
                    // æ§åˆ¶åŠ¨ç”»
                    controlAnimation(step);
                }
                
                // æ§åˆ¶SVGåŠ¨ç”»
                function controlAnimation(step) {
                    const dataPacket = document.getElementById('data-packet');
                    if (!dataPacket) return;
                    
                    // é‡ç½®åŠ¨ç”»ä½ç½®
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚ - æ•°æ®åŒ…ä½äºç”¨æˆ·ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '150');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                        case 2: // æ²™ç®±åŠ å¯† - æ•°æ®åŒ…ä½äºåŠ å¯†èŠ‚ç‚¹
                            dataPacket.setAttributeNS(null, 'cx', '400');
                            dataPacket.setAttributeNS(null, 'cy', '80');
                            break;
                        case 3: // æ¨¡å‹æ¨ç† - æ•°æ®åŒ…ä½äºæ¨¡å‹ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '650');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                        case 4: // æ²™ç®±è§£å¯† - æ•°æ®åŒ…ä½äºè§£å¯†èŠ‚ç‚¹
                            dataPacket.setAttributeNS(null, 'cx', '400');
                            dataPacket.setAttributeNS(null, 'cy', '120');
                            break;
                        case 5: // å®‰å…¨å“åº” - æ•°æ®åŒ…è¿”å›ç”¨æˆ·ç«¯
                            dataPacket.setAttributeNS(null, 'cx', '150');
                            dataPacket.setAttributeNS(null, 'cy', '100');
                            break;
                    }
                    
                    // æ ¹æ®æ­¥éª¤æ’­æ”¾ç›¸åº”åŠ¨ç”»
                    if (step === 1) {
                        const requestAnim = document.getElementById('request-anim');
                        if (requestAnim) requestAnim.beginElement();
                    } else if (step === 2) {
                        const encryptAnim = document.getElementById('encrypt-anim');
                        if (encryptAnim) encryptAnim.beginElement();
                    } else if (step === 3) {
                        const responseAnim = document.getElementById('response-anim');
                        if (responseAnim) responseAnim.beginElement();
                    }
                }
                
                // æ¨¡æ‹Ÿæ²™ç®±å¤„ç†æ­¥éª¤
                function simulateProcessStep(step, sandbox) {
                    const statusEl = document.getElementById('sandbox-status');
                    let statusHTML = '';
                    
                    switch(step) {
                        case 1: // ç”¨æˆ·è¯·æ±‚
                            statusHTML = '<strong>ç”¨æˆ·è¯·æ±‚é˜¶æ®µ</strong><br>å‡†å¤‡å‘é€åŠ å¯†è¯·æ±‚åˆ°å®‰å…¨æ²™ç®±...';
                            setTimeout(() => {
                                const userData = { query: 'è¯·åˆ†æè¿™æ®µæ–‡æœ¬çš„æƒ…æ„Ÿ', text: 'è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡æœ¬' };
                                const securePacket = sandbox.processRequest(userData);
                                statusEl.innerHTML += '<br>âœ… è¯·æ±‚å·²åŠ å¯†å¹¶å‘é€';
                                sandbox.logAudit('ç”¨æˆ·è¯·æ±‚', { action: 'å‘é€è¯·æ±‚', status: 'success' });
                            }, 1000);
                            break;
                            
                        case 2: // æ²™ç®±åŠ å¯†å¤„ç†
                            statusHTML = '<strong>æ²™ç®±åŠ å¯†å¤„ç†é˜¶æ®µ</strong><br>åœ¨éš”ç¦»å†…å­˜ä¸­å¤„ç†åŠ å¯†æ•°æ®...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… åº”ç”¨å±‚è§£å¯†å®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… ç½‘ç»œå±‚è§£å¯†å®Œæˆ';
                                    sandbox.logAudit('æ²™ç®±å¤„ç†', { action: 'è§£å¯†æ•°æ®', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                            
                        case 3: // æ¨¡å‹æ¨ç†
                            statusHTML = '<strong>æ¨¡å‹æ¨ç†é˜¶æ®µ</strong><br>åœ¨å®‰å…¨ç¯å¢ƒä¸­æ‰§è¡Œæ¨¡å‹æ¨ç†...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… æ¨¡å‹æ¨ç†å®Œæˆ';
                                sandbox.logAudit('æ¨¡å‹æ¨ç†', { action: 'æ‰§è¡Œæ¨ç†', status: 'success' });
                            }, 1500);
                            break;
                            
                        case 4: // æ²™ç®±è§£å¯†å¤„ç†
                            statusHTML = '<strong>æ²™ç®±åŠ å¯†å“åº”é˜¶æ®µ</strong><br>å¯¹æ¨¡å‹ç»“æœè¿›è¡Œå®‰å…¨å¤„ç†...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… ç»“æœç­¾åå®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… ç»“æœåŠ å¯†å®Œæˆ';
                                    sandbox.logAudit('æ²™ç®±å¤„ç†', { action: 'åŠ å¯†å“åº”', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                            
                        case 5: // å®‰å…¨å“åº”
                            statusHTML = '<strong>å®‰å…¨å“åº”é˜¶æ®µ</strong><br>å°†åŠ å¯†å“åº”è¿”å›ç»™ç”¨æˆ·...';
                            setTimeout(() => {
                                statusEl.innerHTML += '<br>âœ… å“åº”éªŒè¯å®Œæˆ';
                                setTimeout(() => {
                                    statusEl.innerHTML += '<br>âœ… å“åº”è§£å¯†å®Œæˆ';
                                    sandbox.logAudit('ç”¨æˆ·å“åº”', { action: 'æ¥æ”¶å“åº”', status: 'success' });
                                }, 800);
                            }, 1000);
                            break;
                    }
                    
                    statusEl.innerHTML = statusHTML;
                }
            });
        </script>
    </main>
</body>
</html>