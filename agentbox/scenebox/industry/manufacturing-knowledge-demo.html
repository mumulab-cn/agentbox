<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>制造业智能知识库 - 企业级AI解决方案</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: fadeInDown 1s ease-out;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        .left-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: slideInLeft 0.8s ease-out;
        }

        .right-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: slideInRight 0.8s ease-out;
        }

        .panel-title {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
        }

        .panel-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #1e3c72, #2a5298);
            border-radius: 2px;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .upload-area {
            border: 2px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: #1e3c72;
            background: #f7fafc;
        }

        .upload-area.dragover {
            border-color: #2a5298;
            background: #e6f3ff;
        }

        .upload-icon {
            font-size: 3rem;
            color: #718096;
            margin-bottom: 15px;
            animation: bounce 2s infinite;
        }

        .upload-text {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .upload-hint {
            font-size: 0.9rem;
            color: #718096;
        }

        .file-types {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .file-type {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }

        .knowledge-base {
            margin-bottom: 30px;
        }

        .kb-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #1e3c72;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #718096;
        }

        .file-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .file-icon {
            font-size: 1.5rem;
            margin-right: 12px;
            width: 30px;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 2px;
        }

        .file-meta {
            font-size: 0.8rem;
            color: #718096;
        }

        .file-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-processed {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-processing {
            background: #fed7d7;
            color: #742a2a;
        }

        .chatbot-container {
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 15px 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .chat-info h3 {
            margin-bottom: 2px;
        }

        .chat-info p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            border-left: 1px solid #e2e8f0;
            border-right: 1px solid #e2e8f0;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeInUp 0.3s ease;
        }

        .message-user {
            text-align: right;
        }

        .message-bot {
            text-align: left;
        }

        .message-content {
            display: inline-block;
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .message-user .message-content {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
        }

        .message-bot .message-content {
            background: white;
            color: #2d3748;
            border: 1px solid #e2e8f0;
        }

        .message-time {
            font-size: 0.8rem;
            color: #718096;
            margin-top: 5px;
        }

        .chat-input-area {
            padding: 20px;
            background: white;
            border-radius: 0 0 15px 15px;
            border: 1px solid #e2e8f0;
            border-top: none;
        }

        .input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid #e2e8f0;
            border-radius: 25px;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .send-button {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.3);
        }

        .quick-questions {
            margin-top: 15px;
        }

        .quick-questions-title {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 10px;
        }

        .quick-question-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .quick-question {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-question:hover {
            background: #1e3c72;
            color: white;
        }

        .features-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .feature-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: #1e3c72;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #1e3c72;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2d3748;
        }

        .feature-description {
            color: #718096;
            line-height: 1.6;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 5px;
            padding: 10px 18px;
            background: white;
            border-radius: 18px;
            border: 1px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #718096;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }
        
        .workflow-container {
            margin: 30px 0;
            text-align: center;
        }
        
        .workflow-node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .workflow-node:hover circle {
            stroke-width: 5;
            filter: drop-shadow(0 5px 15px rgba(30, 60, 114, 0.3));
        }
        
        .security-demo-container {
            margin: 30px 0;
        }
        
        .department-matrix {
            margin-bottom: 30px;
        }
        
        .user-selector, .file-list, .permission-details {
            transition: all 0.3s ease;
        }
        
        .user-selector:hover, .file-list:hover, .permission-details:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .file-item {
            transition: all 0.2s ease;
        }
        
        .file-item:hover {
            transform: translateX(5px);
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .chatbot-container {
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .left-panel, .right-panel {
                padding: 20px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .kb-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部标题 -->
        <div class="header">
            <h1>🏭 制造业智能知识库</h1>
            <p>企业文档智能问答 • 知识管理升级 • AI驱动决策</p>
        </div>

        <!-- 主要内容区域 -->
        <div class="main-content">
            <!-- 左侧：知识库管理 -->
            <div class="left-panel">
                <h2 class="panel-title">📚 企业知识库管理</h2>
                
                <!-- 文档上传区域 -->
                <div class="upload-section">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">📁</div>
                        <div class="upload-text">拖拽文件到此处或点击上传</div>
                        <div class="upload-hint">支持批量上传，自动解析文档内容</div>
                        <input type="file" id="fileInput" multiple accept=".doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf,.txt" style="display: none;">
                    </div>
                    
                    <div class="file-types">
                        <span class="file-type">📄 Word</span>
                        <span class="file-type">📊 Excel</span>
                        <span class="file-type">📈 PPT</span>
                        <span class="file-type">📋 PDF</span>
                        <span class="file-type">📝 TXT</span>
                    </div>
                </div>

                <!-- 知识库统计 -->
                <div class="knowledge-base">
                    <div class="kb-stats">
                        <div class="stat-card">
                            <div class="stat-number">1,247</div>
                            <div class="stat-label">文档总数</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">15.6GB</div>
                            <div class="stat-label">存储容量</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">98.5%</div>
                            <div class="stat-label">解析成功率</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">服务可用</div>
                        </div>
                    </div>
                    
                    <!-- 文档列表 -->
                    <div class="file-list" id="fileList">
                        <div class="file-item">
                            <div class="file-icon">📄</div>
                            <div class="file-info">
                                <div class="file-name">生产工艺标准操作手册.docx</div>
                                <div class="file-meta">2.3MB • 2024-01-15 • 生产部</div>
                            </div>
                            <div class="file-status status-processed">已处理</div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-icon">📊</div>
                            <div class="file-info">
                                <div class="file-name">设备维护记录表.xlsx</div>
                                <div class="file-meta">1.8MB • 2024-01-14 • 设备部</div>
                            </div>
                            <div class="file-status status-processed">已处理</div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-icon">📈</div>
                            <div class="file-info">
                                <div class="file-name">质量管理体系培训.pptx</div>
                                <div class="file-meta">5.2MB • 2024-01-13 • 质量部</div>
                            </div>
                            <div class="file-status status-processed">已处理</div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-icon">📋</div>
                            <div class="file-info">
                                <div class="file-name">安全生产规范手册.pdf</div>
                                <div class="file-meta">3.7MB • 2024-01-12 • 安全部</div>
                            </div>
                            <div class="file-status status-processing">处理中</div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-icon">📄</div>
                            <div class="file-info">
                                <div class="file-name">供应商管理制度.docx</div>
                                <div class="file-meta">1.5MB • 2024-01-11 • 采购部</div>
                            </div>
                            <div class="file-status status-processed">已处理</div>
                        </div>
                        
                        <div class="file-item">
                            <div class="file-icon">📊</div>
                            <div class="file-info">
                                <div class="file-name">月度生产数据分析.xlsx</div>
                                <div class="file-meta">2.1MB • 2024-01-10 • 生产部</div>
                            </div>
                            <div class="file-status status-processed">已处理</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧：智能问答 -->
            <div class="right-panel">
                <h2 class="panel-title">🤖 智能问答助手</h2>
                
                <div class="chatbot-container">
                    <!-- 聊天头部 -->
                    <div class="chat-header">
                        <div class="chat-avatar">🤖</div>
                        <div class="chat-info">
                            <h3>知识助手</h3>
                            <p>基于企业知识库的智能问答</p>
                        </div>
                    </div>
                    
                    <!-- 聊天消息区域 -->
                    <div class="chat-messages" id="chatMessages">
                        <div class="message message-bot">
                            <div class="message-content">
                                您好！我是智能知识助手，可以帮您快速查找企业内部文档信息。您可以询问关于生产工艺、设备维护、质量管理、安全规范等任何问题。
                            </div>
                            <div class="message-time">刚刚</div>
                        </div>
                        
                        <div class="message message-user">
                            <div class="message-content">
                                请问设备日常维护的标准流程是什么？
                            </div>
                            <div class="message-time">14:25</div>
                        </div>
                        
                        <div class="message message-bot">
                            <div class="message-content">
                                根据《设备维护记录表.xlsx》和《生产工艺标准操作手册.docx》，设备日常维护标准流程包括：<br><br>
                                1. 每日开机前检查：检查设备外观、润滑油位、安全装置<br>
                                2. 运行中监控：温度、压力、振动等关键参数<br>
                                3. 每日收工后清洁：清理设备表面、工作区域<br>
                                4. 周期性保养：按照保养计划进行润滑、更换易损件<br>
                                5. 记录填写：详细记录维护内容和发现的问题<br><br>
                                需要查看具体的维护周期表吗？
                            </div>
                            <div class="message-time">14:25</div>
                        </div>
                    </div>
                    
                    <!-- 打字指示器 -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <span style="margin-left: 10px; color: #718096; font-size: 0.9rem;">AI正在思考...</span>
                    </div>
                    
                    <!-- 输入区域 -->
                    <div class="chat-input-area">
                        <div class="input-container">
                            <input type="text" class="chat-input" id="chatInput" placeholder="请输入您的问题...">
                            <button class="send-button" id="sendButton">发送</button>
                        </div>
                        
                        <!-- 快捷问题 -->
                        <div class="quick-questions">
                            <div class="quick-questions-title">💡 常见问题：</div>
                            <div class="quick-question-buttons">
                                <div class="quick-question" data-question="质量检验的标准是什么？">质量检验标准</div>
                                <div class="quick-question" data-question="安全生产有哪些注意事项？">安全生产规范</div>
                                <div class="quick-question" data-question="供应商评估流程是怎样的？">供应商管理</div>
                                <div class="quick-question" data-question="生产数据异常如何处理？">异常处理流程</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 工作流展示 -->
        <div class="features-section">
            <h2 class="panel-title">🔄 AI工作流引擎</h2>
            <p style="text-align: center; font-size: 1.1rem; color: #718096; margin-bottom: 30px;">
                基于Dify/扣子平台的智能工作流，实现文档处理的全自动化流程
            </p>
            
            <div class="workflow-container">
                <svg width="100%" height="400" viewBox="0 0 1200 400" style="background: #f8f9fa; border-radius: 15px; border: 1px solid #e2e8f0;">
                    <!-- 工作流背景网格 -->
                    <defs>
                        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e2e8f0" stroke-width="1" opacity="0.3"/>
                        </pattern>
                        <linearGradient id="nodeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#1e3c72;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#2a5298;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="processGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid)" />
                    
                    <!-- 节点1: 文档上传 -->
                    <g class="workflow-node" transform="translate(80, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#nodeGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">📁</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">上传</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">文档上传</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">支持多格式</text>
                    </g>
                    
                    <!-- 连接线1 -->
                    <line x1="120" y1="150" x2="180" y2="150" stroke="#1e3c72" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite"/>
                    </line>
                    
                    <!-- 节点2: 格式识别 -->
                    <g class="workflow-node" transform="translate(220, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#processGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="0.5s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">🔍</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">识别</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">格式识别</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">AI自动检测</text>
                    </g>
                    
                    <!-- 连接线2 -->
                    <line x1="260" y1="150" x2="320" y2="150" stroke="#48bb78" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite" begin="0.5s"/>
                    </line>
                    
                    <!-- 节点3: 内容解析 -->
                    <g class="workflow-node" transform="translate(360, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#nodeGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="1s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">⚙️</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">解析</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">内容解析</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">结构化提取</text>
                    </g>
                    
                    <!-- 连接线3 -->
                    <line x1="400" y1="150" x2="460" y2="150" stroke="#1e3c72" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite" begin="1s"/>
                    </line>
                    
                    <!-- 节点4: 知识抽取 -->
                    <g class="workflow-node" transform="translate(500, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#processGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="1.5s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">🧠</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">抽取</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">知识抽取</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">语义理解</text>
                    </g>
                    
                    <!-- 连接线4 -->
                    <line x1="540" y1="150" x2="600" y2="150" stroke="#48bb78" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite" begin="1.5s"/>
                    </line>
                    
                    <!-- 节点5: 向量化 -->
                    <g class="workflow-node" transform="translate(640, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#nodeGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="2s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">🔢</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">向量</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">向量化</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">Embedding</text>
                    </g>
                    
                    <!-- 连接线5 -->
                    <line x1="680" y1="150" x2="740" y2="150" stroke="#1e3c72" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite" begin="2s"/>
                    </line>
                    
                    <!-- 节点6: 存储索引 -->
                    <g class="workflow-node" transform="translate(780, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#processGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="2.5s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">💾</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">存储</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">存储索引</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">向量数据库</text>
                    </g>
                    
                    <!-- 连接线6 -->
                    <line x1="820" y1="150" x2="880" y2="150" stroke="#48bb78" stroke-width="3" marker-end="url(#arrowhead)">
                        <animate attributeName="stroke-dasharray" values="0,10;10,0" dur="1s" repeatCount="indefinite" begin="2.5s"/>
                    </line>
                    
                    <!-- 节点7: 智能问答 -->
                    <g class="workflow-node" transform="translate(920, 150)">
                        <circle cx="0" cy="0" r="40" fill="url(#nodeGradient)" stroke="#fff" stroke-width="3">
                            <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite" begin="3s"/>
                        </circle>
                        <text x="0" y="-5" text-anchor="middle" fill="white" font-size="24">🤖</text>
                        <text x="0" y="10" text-anchor="middle" fill="white" font-size="10" font-weight="bold">问答</text>
                        <text x="0" y="65" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">智能问答</text>
                        <text x="0" y="80" text-anchor="middle" fill="#718096" font-size="10">RAG检索</text>
                    </g>
                    
                    <!-- 箭头标记定义 -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#1e3c72" />
                        </marker>
                    </defs>
                    
                    <!-- 工作流标题 -->
                    <text x="600" y="40" text-anchor="middle" fill="#2d3748" font-size="18" font-weight="bold">Dify/扣子 AI工作流引擎</text>
                    <text x="600" y="60" text-anchor="middle" fill="#718096" font-size="14">文档智能处理 → 知识图谱构建 → 智能问答服务</text>
                    
                    <!-- 性能指标 -->
                    <g transform="translate(100, 300)">
                        <rect x="0" y="0" width="200" height="80" rx="10" fill="#f8f9fa" stroke="#e2e8f0" stroke-width="1"/>
                        <text x="100" y="20" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">处理性能</text>
                        <text x="50" y="40" text-anchor="middle" fill="#1e3c72" font-size="14" font-weight="bold">98.5%</text>
                        <text x="50" y="55" text-anchor="middle" fill="#718096" font-size="10">准确率</text>
                        <text x="150" y="40" text-anchor="middle" fill="#48bb78" font-size="14" font-weight="bold">2.3s</text>
                        <text x="150" y="55" text-anchor="middle" fill="#718096" font-size="10">平均耗时</text>
                    </g>
                    
                    <g transform="translate(400, 300)">
                        <rect x="0" y="0" width="200" height="80" rx="10" fill="#f8f9fa" stroke="#e2e8f0" stroke-width="1"/>
                        <text x="100" y="20" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">支持格式</text>
                        <text x="50" y="40" text-anchor="middle" fill="#1e3c72" font-size="14" font-weight="bold">15+</text>
                        <text x="50" y="55" text-anchor="middle" fill="#718096" font-size="10">文档类型</text>
                        <text x="150" y="40" text-anchor="middle" fill="#48bb78" font-size="14" font-weight="bold">10GB</text>
                        <text x="150" y="55" text-anchor="middle" fill="#718096" font-size="10">单文件上限</text>
                    </g>
                    
                    <g transform="translate(700, 300)">
                        <rect x="0" y="0" width="200" height="80" rx="10" fill="#f8f9fa" stroke="#e2e8f0" stroke-width="1"/>
                        <text x="100" y="20" text-anchor="middle" fill="#2d3748" font-size="12" font-weight="bold">并发能力</text>
                        <text x="50" y="40" text-anchor="middle" fill="#1e3c72" font-size="14" font-weight="bold">1000+</text>
                        <text x="50" y="55" text-anchor="middle" fill="#718096" font-size="10">并发用户</text>
                        <text x="150" y="40" text-anchor="middle" fill="#48bb78" font-size="14" font-weight="bold">24/7</text>
                        <text x="150" y="55" text-anchor="middle" fill="#718096" font-size="10">服务可用</text>
                    </g>
                </svg>
            </div>
        </div>
        
        <!-- 数据安全与权限管理 -->
        <div class="features-section" style="margin-top: 50px;">
            <h2 class="panel-title">🔒 企业数据安全与权限管理</h2>
            <p style="text-align: center; font-size: 1.1rem; color: #718096; margin-bottom: 30px;">
                100名员工分部门上传文件，基于角色的权限控制确保数据安全
            </p>
            
            <div class="security-demo-container">
                <!-- 部门权限矩阵 -->
                <div class="department-matrix">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #2d3748;">🏢 部门权限矩阵</h3>
                    <svg width="100%" height="500" viewBox="0 0 1000 500" style="background: #f8f9fa; border-radius: 15px; border: 1px solid #e2e8f0;">
                        <!-- 部门区域 -->
                        <g id="production-dept">
                            <rect x="50" y="50" width="200" height="150" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
                            <text x="150" y="75" text-anchor="middle" fill="#1976d2" font-size="14" font-weight="bold">生产部门</text>
                            <text x="150" y="95" text-anchor="middle" fill="#1976d2" font-size="12">35名员工</text>
                            
                            <!-- 员工图标 -->
                            <g transform="translate(70, 110)">
                                <circle cx="0" cy="0" r="8" fill="#1976d2"/>
                                <circle cx="20" cy="0" r="8" fill="#1976d2"/>
                                <circle cx="40" cy="0" r="8" fill="#1976d2"/>
                                <circle cx="60" cy="0" r="8" fill="#1976d2"/>
                                <circle cx="80" cy="0" r="8" fill="#1976d2"/>
                                <text x="100" y="5" fill="#1976d2" font-size="10">+30</text>
                            </g>
                            
                            <!-- 权限标识 -->
                            <rect x="60" y="140" width="60" height="20" rx="5" fill="#4caf50"/>
                            <text x="90" y="153" text-anchor="middle" fill="white" font-size="10">生产文档</text>
                            <rect x="130" y="140" width="60" height="20" rx="5" fill="#ff9800"/>
                            <text x="160" y="153" text-anchor="middle" fill="white" font-size="10">设备维护</text>
                        </g>
                        
                        <g id="quality-dept">
                            <rect x="300" y="50" width="200" height="150" rx="10" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
                            <text x="400" y="75" text-anchor="middle" fill="#7b1fa2" font-size="14" font-weight="bold">质量部门</text>
                            <text x="400" y="95" text-anchor="middle" fill="#7b1fa2" font-size="12">25名员工</text>
                            
                            <g transform="translate(320, 110)">
                                <circle cx="0" cy="0" r="8" fill="#7b1fa2"/>
                                <circle cx="20" cy="0" r="8" fill="#7b1fa2"/>
                                <circle cx="40" cy="0" r="8" fill="#7b1fa2"/>
                                <circle cx="60" cy="0" r="8" fill="#7b1fa2"/>
                                <text x="80" y="5" fill="#7b1fa2" font-size="10">+21</text>
                            </g>
                            
                            <rect x="310" y="140" width="60" height="20" rx="5" fill="#4caf50"/>
                            <text x="340" y="153" text-anchor="middle" fill="white" font-size="10">质量标准</text>
                            <rect x="380" y="140" width="60" height="20" rx="5" fill="#f44336"/>
                            <text x="410" y="153" text-anchor="middle" fill="white" font-size="10">检测报告</text>
                        </g>
                        
                        <g id="rd-dept">
                            <rect x="550" y="50" width="200" height="150" rx="10" fill="#e8f5e8" stroke="#388e3c" stroke-width="2"/>
                            <text x="650" y="75" text-anchor="middle" fill="#388e3c" font-size="14" font-weight="bold">研发部门</text>
                            <text x="650" y="95" text-anchor="middle" fill="#388e3c" font-size="12">20名员工</text>
                            
                            <g transform="translate(570, 110)">
                                <circle cx="0" cy="0" r="8" fill="#388e3c"/>
                                <circle cx="20" cy="0" r="8" fill="#388e3c"/>
                                <circle cx="40" cy="0" r="8" fill="#388e3c"/>
                                <circle cx="60" cy="0" r="8" fill="#388e3c"/>
                                <text x="80" y="5" fill="#388e3c" font-size="10">+16</text>
                            </g>
                            
                            <rect x="560" y="140" width="60" height="20" rx="5" fill="#ff5722"/>
                            <text x="590" y="153" text-anchor="middle" fill="white" font-size="10">技术文档</text>
                            <rect x="630" y="140" width="60" height="20" rx="5" fill="#9c27b0"/>
                            <text x="660" y="153" text-anchor="middle" fill="white" font-size="10">专利资料</text>
                        </g>
                        
                        <g id="management-dept">
                            <rect x="800" y="50" width="150" height="150" rx="10" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
                            <text x="875" y="75" text-anchor="middle" fill="#f57c00" font-size="14" font-weight="bold">管理层</text>
                            <text x="875" y="95" text-anchor="middle" fill="#f57c00" font-size="12">20名员工</text>
                            
                            <g transform="translate(820, 110)">
                                <circle cx="0" cy="0" r="8" fill="#f57c00"/>
                                <circle cx="20" cy="0" r="8" fill="#f57c00"/>
                                <circle cx="40" cy="0" r="8" fill="#f57c00"/>
                                <text x="60" y="5" fill="#f57c00" font-size="10">+17</text>
                            </g>
                            
                            <rect x="810" y="140" width="50" height="20" rx="5" fill="#2196f3"/>
                            <text x="835" y="153" text-anchor="middle" fill="white" font-size="9">全部权限</text>
                            <rect x="870" y="140" width="50" height="20" rx="5" fill="#607d8b"/>
                            <text x="895" y="153" text-anchor="middle" fill="white" font-size="9">审计日志</text>
                        </g>
                        
                        <!-- 权限流向箭头 -->
                        <defs>
                            <marker id="securityArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                                <polygon points="0 0, 8 3, 0 6" fill="#666" />
                            </marker>
                        </defs>
                        
                        <!-- 数据流向 -->
                        <path d="M 250 125 Q 350 250 450 125" stroke="#666" stroke-width="2" fill="none" marker-end="url(#securityArrow)" stroke-dasharray="5,5">
                            <animate attributeName="stroke-dashoffset" values="0;-10" dur="1s" repeatCount="indefinite"/>
                        </path>
                        <text x="350" y="270" text-anchor="middle" fill="#666" font-size="10">跨部门协作</text>
                        
                        <path d="M 500 125 Q 600 250 700 125" stroke="#666" stroke-width="2" fill="none" marker-end="url(#securityArrow)" stroke-dasharray="5,5">
                            <animate attributeName="stroke-dashoffset" values="0;-10" dur="1s" repeatCount="indefinite" begin="0.5s"/>
                        </path>
                        <text x="600" y="270" text-anchor="middle" fill="#666" font-size="10">技术共享</text>
                        
                        <!-- 安全中心 -->
                        <g transform="translate(500, 350)">
                            <circle cx="0" cy="0" r="50" fill="#ffebee" stroke="#d32f2f" stroke-width="3">
                                <animate attributeName="r" values="50;55;50" dur="2s" repeatCount="indefinite"/>
                            </circle>
                            <text x="0" y="-10" text-anchor="middle" fill="#d32f2f" font-size="20">🛡️</text>
                            <text x="0" y="10" text-anchor="middle" fill="#d32f2f" font-size="12" font-weight="bold">安全中心</text>
                            <text x="0" y="25" text-anchor="middle" fill="#d32f2f" font-size="10">权限控制</text>
                        </g>
                        
                        <!-- 连接线到安全中心 -->
                        <line x1="150" y1="200" x2="470" y2="330" stroke="#d32f2f" stroke-width="1" stroke-dasharray="3,3"/>
                        <line x1="400" y1="200" x2="490" y2="320" stroke="#d32f2f" stroke-width="1" stroke-dasharray="3,3"/>
                        <line x1="650" y1="200" x2="520" y2="320" stroke="#d32f2f" stroke-width="1" stroke-dasharray="3,3"/>
                        <line x1="875" y1="200" x2="540" y2="330" stroke="#d32f2f" stroke-width="1" stroke-dasharray="3,3"/>
                        
                        <!-- 统计信息 -->
                        <text x="50" y="480" fill="#2d3748" font-size="14" font-weight="bold">权限统计：</text>
                        <text x="150" y="480" fill="#1976d2" font-size="12">生产部门: 2,340个文件</text>
                        <text x="300" y="480" fill="#7b1fa2" font-size="12">质量部门: 1,890个文件</text>
                        <text x="450" y="480" fill="#388e3c" font-size="12">研发部门: 3,120个文件</text>
                        <text x="600" y="480" fill="#f57c00" font-size="12">管理层: 全部访问</text>
                    </svg>
                </div>
                
                <!-- 权限验证演示 -->
                <div class="permission-demo" style="margin-top: 30px;">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #2d3748;">🔐 权限验证演示</h3>
                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                        <!-- 用户选择 -->
                        <div class="user-selector" style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #e2e8f0; min-width: 250px;">
                            <h4 style="margin-top: 0; color: #2d3748;">👤 选择用户身份</h4>
                            <select id="userSelect" style="width: 100%; padding: 8px; border: 1px solid #cbd5e0; border-radius: 5px; margin-bottom: 15px;">
                                <option value="prod-001">张三 - 生产部门 (普通员工)</option>
                                <option value="qual-001">李四 - 质量部门 (质检员)</option>
                                <option value="rd-001">王五 - 研发部门 (工程师)</option>
                                <option value="mgmt-001">赵六 - 管理层 (部门经理)</option>
                            </select>
                            <button onclick="checkPermissions()" style="width: 100%; padding: 10px; background: #1e3c72; color: white; border: none; border-radius: 5px; cursor: pointer;">🔍 检查权限</button>
                        </div>
                        
                        <!-- 文件列表 -->
                        <div class="file-list" style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #e2e8f0; min-width: 400px;">
                            <h4 style="margin-top: 0; color: #2d3748;">📁 可访问文件列表</h4>
                            <div id="fileList" style="max-height: 200px; overflow-y: auto;">
                                <div class="file-item" style="padding: 8px; margin: 5px 0; background: white; border-radius: 5px; border-left: 4px solid #4caf50;">
                                    <span style="font-weight: bold;">📄 生产计划表.xlsx</span>
                                    <span style="float: right; color: #4caf50; font-size: 12px;">✓ 有权限</span>
                                </div>
                                <div class="file-item" style="padding: 8px; margin: 5px 0; background: #ffebee; border-radius: 5px; border-left: 4px solid #f44336;">
                                    <span style="font-weight: bold; color: #999;">📄 财务报表.pdf</span>
                                    <span style="float: right; color: #f44336; font-size: 12px;">✗ 无权限</span>
                                </div>
                                <div class="file-item" style="padding: 8px; margin: 5px 0; background: white; border-radius: 5px; border-left: 4px solid #4caf50;">
                                    <span style="font-weight: bold;">📄 设备维护手册.docx</span>
                                    <span style="float: right; color: #4caf50; font-size: 12px;">✓ 有权限</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 权限详情 -->
                        <div class="permission-details" style="background: #f8f9fa; padding: 20px; border-radius: 10px; border: 1px solid #e2e8f0; min-width: 250px;">
                            <h4 style="margin-top: 0; color: #2d3748;">🔒 权限详情</h4>
                            <div id="permissionDetails">
                                <div style="margin: 10px 0; padding: 8px; background: #e8f5e8; border-radius: 5px;">
                                    <strong style="color: #388e3c;">读取权限</strong><br>
                                    <small style="color: #666;">可查看生产相关文档</small>
                                </div>
                                <div style="margin: 10px 0; padding: 8px; background: #fff3e0; border-radius: 5px;">
                                    <strong style="color: #f57c00;">编辑权限</strong><br>
                                    <small style="color: #666;">可修改生产计划</small>
                                </div>
                                <div style="margin: 10px 0; padding: 8px; background: #ffebee; border-radius: 5px;">
                                    <strong style="color: #f44336;">禁止访问</strong><br>
                                    <small style="color: #666;">财务、人事文档</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 功能特色展示 -->
        <div class="features-section" style="margin-top: 50px;">
            <h2 class="panel-title">🌟 核心功能特色</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🔍</div>
                    <div class="feature-title">智能文档解析</div>
                    <div class="feature-description">
                        支持Word、Excel、PPT、PDF等多种格式，自动提取文档结构和关键信息，建立知识图谱。
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">🧠</div>
                    <div class="feature-title">语义理解问答</div>
                    <div class="feature-description">
                        基于大语言模型的深度语义理解，准确理解用户意图，提供精准的答案和相关文档引用。
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <div class="feature-title">实时知识更新</div>
                    <div class="feature-description">
                        文档上传后自动解析入库，实时更新知识库内容，确保信息的时效性和准确性。
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">🔒</div>
                    <div class="feature-title">企业级安全</div>
                    <div class="feature-description">
                        私有化部署，数据不出企业，支持权限管理和访问控制，保障企业信息安全。
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <div class="feature-title">使用分析统计</div>
                    <div class="feature-description">
                        详细的使用统计和分析报告，了解知识库使用情况，优化知识管理策略。
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">🔧</div>
                    <div class="feature-title">灵活集成部署</div>
                    <div class="feature-description">
                        支持API接口集成，可嵌入现有业务系统，提供多种部署方式和定制化服务。
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeUpload();
            initializeChat();
            initializeAnimations();
        });

        // 初始化文件上传功能
        function initializeUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');

            // 点击上传区域
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            // 拖拽上传
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                handleFiles(files);
            });

            // 文件选择
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });

            // 处理文件上传
            function handleFiles(files) {
                Array.from(files).forEach(file => {
                    addFileToList(file);
                    simulateFileProcessing(file);
                });
            }

            // 添加文件到列表
            function addFileToList(file) {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const fileIcon = getFileIcon(file.name);
                const fileSize = (file.size / (1024 * 1024)).toFixed(1) + 'MB';
                const currentTime = new Date().toLocaleDateString();
                
                fileItem.innerHTML = `
                    <div class="file-icon">${fileIcon}</div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-meta">${fileSize} • ${currentTime} • 用户上传</div>
                    </div>
                    <div class="file-status status-processing">处理中</div>
                `;
                
                fileList.insertBefore(fileItem, fileList.firstChild);
                
                // 动画效果
                fileItem.style.opacity = '0';
                fileItem.style.transform = 'translateX(-20px)';
                setTimeout(() => {
                    fileItem.style.transition = 'all 0.3s ease';
                    fileItem.style.opacity = '1';
                    fileItem.style.transform = 'translateX(0)';
                }, 100);
            }

            // 模拟文件处理
            function simulateFileProcessing(file) {
                setTimeout(() => {
                    const fileItems = fileList.querySelectorAll('.file-item');
                    const latestItem = fileItems[0];
                    const statusElement = latestItem.querySelector('.file-status');
                    statusElement.textContent = '已处理';
                    statusElement.className = 'file-status status-processed';
                    
                    // 更新统计数据
                    updateStats();
                }, 2000 + Math.random() * 3000);
            }

            // 获取文件图标
            function getFileIcon(filename) {
                const ext = filename.split('.').pop().toLowerCase();
                const iconMap = {
                    'doc': '📄', 'docx': '📄',
                    'xls': '📊', 'xlsx': '📊',
                    'ppt': '📈', 'pptx': '📈',
                    'pdf': '📋',
                    'txt': '📝'
                };
                return iconMap[ext] || '📄';
            }

            // 更新统计数据
            function updateStats() {
                const statNumbers = document.querySelectorAll('.stat-number');
                const currentCount = parseInt(statNumbers[0].textContent.replace(',', ''));
                statNumbers[0].textContent = (currentCount + 1).toLocaleString();
            }
        }

        // 初始化聊天功能
        function initializeChat() {
            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            const chatMessages = document.getElementById('chatMessages');
            const typingIndicator = document.getElementById('typingIndicator');
            const quickQuestions = document.querySelectorAll('.quick-question');

            // 发送消息
            function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;

                // 添加用户消息
                addMessage(message, 'user');
                chatInput.value = '';

                // 显示打字指示器
                showTypingIndicator();

                // 模拟AI回复
                setTimeout(() => {
                    hideTypingIndicator();
                    const response = generateAIResponse(message);
                    addMessage(response, 'bot');
                }, 1500 + Math.random() * 2000);
            }

            // 添加消息到聊天区域
            function addMessage(content, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message message-${sender}`;
                
                const currentTime = new Date().toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                messageDiv.innerHTML = `
                    <div class="message-content">${content}</div>
                    <div class="message-time">${currentTime}</div>
                `;
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // 显示打字指示器
            function showTypingIndicator() {
                typingIndicator.style.display = 'flex';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // 隐藏打字指示器
            function hideTypingIndicator() {
                typingIndicator.style.display = 'none';
            }

            // 生成AI回复
            function generateAIResponse(question) {
                const responses = {
                    '质量': '根据《质量管理体系培训.pptx》，我们的质量检验标准包括：原材料检验、过程检验、成品检验三个环节。每个环节都有详细的检验项目和标准要求...',
                    '安全': '根据《安全生产规范手册.pdf》，安全生产的主要注意事项包括：1. 佩戴个人防护用品 2. 遵守操作规程 3. 定期安全培训 4. 隐患排查整改...',
                    '供应商': '根据《供应商管理制度.docx》，供应商评估流程分为：资质审查→现场审核→试样评估→合格供应商认定→定期评价→持续改进六个步骤...',
                    '数据': '根据《月度生产数据分析.xlsx》，当生产数据出现异常时，应立即启动异常处理流程：1. 数据核实 2. 原因分析 3. 纠正措施 4. 预防措施...',
                    '维护': '根据设备维护相关文档，设备维护包括日常保养、定期检修、故障维修三个层次。具体的维护周期和内容请参考《设备维护记录表.xlsx》...',
                    '工艺': '根据《生产工艺标准操作手册.docx》，标准工艺流程包括：原料准备→工艺参数设置→生产执行→质量控制→成品包装等环节...'
                };
                
                // 简单的关键词匹配
                for (let keyword in responses) {
                    if (question.includes(keyword)) {
                        return responses[keyword];
                    }
                }
                
                return '感谢您的提问！我正在企业知识库中搜索相关信息。根据现有文档，我找到了一些相关内容，但可能需要更具体的问题描述才能提供更准确的答案。您可以尝试使用更具体的关键词，或者查看快捷问题获取灵感。';
            }

            // 事件监听
            sendButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // 快捷问题点击
            quickQuestions.forEach(button => {
                button.addEventListener('click', () => {
                    const question = button.getAttribute('data-question');
                    chatInput.value = question;
                    sendMessage();
                });
            });
        }
        
        // 权限检查功能
        function checkPermissions() {
            const userSelect = document.getElementById('userSelect');
            const fileList = document.getElementById('fileList');
            const permissionDetails = document.getElementById('permissionDetails');
            
            const selectedUser = userSelect.value;
            
            // 模拟不同用户的权限数据
            const userPermissions = {
                'prod-001': {
                    files: [
                        { name: '📄 生产计划表.xlsx', hasAccess: true },
                        { name: '📄 设备维护手册.docx', hasAccess: true },
                        { name: '📄 生产流程图.pdf', hasAccess: true },
                        { name: '📄 财务报表.pdf', hasAccess: false },
                        { name: '📄 人事档案.xlsx', hasAccess: false },
                        { name: '📄 技术专利.docx', hasAccess: false }
                    ],
                    permissions: [
                        { type: '读取权限', desc: '可查看生产相关文档', color: '#e8f5e8', textColor: '#388e3c' },
                        { type: '编辑权限', desc: '可修改生产计划', color: '#fff3e0', textColor: '#f57c00' },
                        { type: '禁止访问', desc: '财务、人事、技术文档', color: '#ffebee', textColor: '#f44336' }
                    ]
                },
                'qual-001': {
                    files: [
                        { name: '📄 质量检测标准.pdf', hasAccess: true },
                        { name: '📄 检测报告模板.xlsx', hasAccess: true },
                        { name: '📄 质量管理体系.docx', hasAccess: true },
                        { name: '📄 生产计划表.xlsx', hasAccess: true },
                        { name: '📄 财务报表.pdf', hasAccess: false },
                        { name: '📄 技术专利.docx', hasAccess: false }
                    ],
                    permissions: [
                        { type: '读取权限', desc: '可查看质量和生产文档', color: '#e8f5e8', textColor: '#388e3c' },
                        { type: '编辑权限', desc: '可修改质量标准', color: '#fff3e0', textColor: '#f57c00' },
                        { type: '禁止访问', desc: '财务、技术专利文档', color: '#ffebee', textColor: '#f44336' }
                    ]
                },
                'rd-001': {
                    files: [
                        { name: '📄 技术专利.docx', hasAccess: true },
                        { name: '📄 研发计划.xlsx', hasAccess: true },
                        { name: '📄 产品设计图.pdf', hasAccess: true },
                        { name: '📄 质量检测标准.pdf', hasAccess: true },
                        { name: '📄 财务报表.pdf', hasAccess: false },
                        { name: '📄 人事档案.xlsx', hasAccess: false }
                    ],
                    permissions: [
                        { type: '读取权限', desc: '可查看技术和质量文档', color: '#e8f5e8', textColor: '#388e3c' },
                        { type: '编辑权限', desc: '可修改技术文档', color: '#fff3e0', textColor: '#f57c00' },
                        { type: '禁止访问', desc: '财务、人事文档', color: '#ffebee', textColor: '#f44336' }
                    ]
                },
                'mgmt-001': {
                    files: [
                        { name: '📄 财务报表.pdf', hasAccess: true },
                        { name: '📄 人事档案.xlsx', hasAccess: true },
                        { name: '📄 生产计划表.xlsx', hasAccess: true },
                        { name: '📄 质量检测标准.pdf', hasAccess: true },
                        { name: '📄 技术专利.docx', hasAccess: true },
                        { name: '📄 审计日志.txt', hasAccess: true }
                    ],
                    permissions: [
                        { type: '完全权限', desc: '可访问所有文档', color: '#e3f2fd', textColor: '#1976d2' },
                        { type: '管理权限', desc: '可管理用户权限', color: '#f3e5f5', textColor: '#7b1fa2' },
                        { type: '审计权限', desc: '可查看访问日志', color: '#e8f5e8', textColor: '#388e3c' }
                    ]
                }
            };
            
            const userData = userPermissions[selectedUser];
            
            // 更新文件列表
            fileList.innerHTML = userData.files.map(file => `
                <div class="file-item" style="padding: 8px; margin: 5px 0; background: ${file.hasAccess ? 'white' : '#ffebee'}; border-radius: 5px; border-left: 4px solid ${file.hasAccess ? '#4caf50' : '#f44336'};">
                    <span style="font-weight: bold; ${file.hasAccess ? '' : 'color: #999;'}">${file.name}</span>
                    <span style="float: right; color: ${file.hasAccess ? '#4caf50' : '#f44336'}; font-size: 12px;">${file.hasAccess ? '✓ 有权限' : '✗ 无权限'}</span>
                </div>
            `).join('');
            
            // 更新权限详情
            permissionDetails.innerHTML = userData.permissions.map(perm => `
                <div style="margin: 10px 0; padding: 8px; background: ${perm.color}; border-radius: 5px;">
                    <strong style="color: ${perm.textColor};">${perm.type}</strong><br>
                    <small style="color: #666;">${perm.desc}</small>
                </div>
            `).join('');
        }

        // 初始化动画效果
        function initializeAnimations() {
            // 滚动动画观察器
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1
            });

            // 观察所有需要动画的元素
            document.querySelectorAll('.feature-card, .left-panel, .right-panel').forEach(element => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(30px)';
                element.style.transition = 'all 0.8s ease';
                observer.observe(element);
            });

            // 统计数字动画
            function animateNumbers() {
                document.querySelectorAll('.stat-number').forEach(element => {
                    const target = element.textContent.replace(/[^0-9.]/g, '');
                    const targetNum = parseFloat(target);
                    if (isNaN(targetNum)) return;
                    
                    let current = 0;
                    const increment = targetNum / 50;
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= targetNum) {
                            current = targetNum;
                            clearInterval(timer);
                        }
                        
                        if (element.textContent.includes(',')) {
                            element.textContent = Math.floor(current).toLocaleString();
                        } else if (element.textContent.includes('GB')) {
                            element.textContent = current.toFixed(1) + 'GB';
                        } else if (element.textContent.includes('%')) {
                            element.textContent = current.toFixed(1) + '%';
                        } else {
                            element.textContent = current.toFixed(0);
                        }
                    }, 40);
                });
            }

            // 当统计区域进入视野时开始数字动画
            const statsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateNumbers();
                        statsObserver.unobserve(entry.target);
                    }
                });
            });

            const statsSection = document.querySelector('.kb-stats');
            if (statsSection) {
                statsObserver.observe(statsSection);
            }
        }
    </script>
</body>
</html>